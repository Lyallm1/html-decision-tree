!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.decisiontree=e():t.decisiontree=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./ts/index.ts")}({"./ts/index.ts":
/*!*********************!*\
  !*** ./ts/index.ts ***!
  \*********************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tree=void 0;var r=n(/*! ./tree */"./ts/tree.ts");e.Tree=r.Tree},"./ts/tree.ts":
/*!********************!*\
  !*** ./ts/tree.ts ***!
  \********************/
/*! no static exports found */function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.Card=e.Summary=e.Leaf=e.Nary=e.Binary=e.Node=e.DepthFirst=e.Tree=void 0;var s=n(/*! ./util */"./ts/util.ts"),u=function(){function t(){this.jsonStr="",this.root=null,this.history=[],this.summaryElement=new m}return t.prototype.loadJson=function(t){var e=this;return new Promise((function(n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?this._loadJson(i.responseText,n,r):r(i.statusText))}.bind(e),i.onerror=function(){r(i.statusText)}.bind(e),i.open("GET",t,!0),i.send()}))},t.prototype._loadJson=function(t,e,n){try{this.jsonStr=t,this.fromJson(),e("JSON loaded")}catch(t){n("JSON Parser Error!")}},t.prototype.fromJson=function(){var t=this;this.root=c.fromJson(JSON.parse(this.jsonStr)),new l(this,(function(t){return t})).result.forEach((function(e){return e.tree=t})),this.summaryElement.parent=this.root,this.summaryElement.tree=this},t.prototype.toHTML=function(t){void 0===t&&(t=null),this.rootElement=t,new l(this,(function(t){return t})).result.forEach((function(e){t.appendChild(e.toHtml()),e.hide()})),t.appendChild(this.summaryElement.toHtml()),this.summaryElement.hide(),this.root.show()},t.prototype.summary=function(t){t.hide(),this.summaryElement.parent=t,this.summaryElement.show()},t}();e.Tree=u;var l=function(){function t(t,e){this.func=e,this.result=[],this.visit(t.root)}return t.prototype.visit=function(t){var e=this;this.result.push(this.func(t)),t.children.forEach((function(t){return e.visit(t)}))},t}();e.DepthFirst=l;var d=0,h=0,c=function(){function t(t,e,n,r){var i,a;void 0===e&&(e=""),void 0===n&&(n=0),void 0===r&&(r=[]),this.content=t,this.title=e,this.value=n,this.kind="",this.labels=new Map,this.children=new Map,this.parent=null,this.variable="dt_variable_"+d++,this.radioButtons=[],this.nextName="Next",this.previousName="Back",this.card=new v;try{for(var s=o(r),u=s.next();!u.done;u=s.next()){var l=u.value,h=l.text,c=l.value;this.labels.set(c,h)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}return t.parseChildren=function(e,n){var r,i;if(n&&n.length)try{for(var a=o(n),s=a.next();!s.done;s=a.next()){var u=s.value,l=t.fromJson(u);e.children.set(l.value,l),l.parent=e}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t.fromJson=function(e){var n=null;switch(e.type||"leaf"){case"leaf":n=new y(e.content,e.title,e.value,e.action);break;case"nary":n=new p(e.content,e.title,e.value,e.labels||[]),t.parseChildren(n,e.children);break;case"binary":n=new f(e.content,e.title,e.value),t.parseChildren(n,e.children);break;default:throw Error("Unknown node type.")}return n},t.prototype.toHtml=function(){s.default.addClass(this.card.div,this.kind),this.card.title.innerHTML=this.title;var t=document.createElement("span");return s.default.addClass(t,"CONTENT"),t.innerHTML=this.content,this.card.content.appendChild(t),this.radios(),this.buttons(),this.card.div},t.prototype.radios=function(){var t,e;try{for(var n=o(this.labels),r=n.next();!r.done;r=n.next()){var i=a(r.value,2),u=i[0],l=i[1],d=s.default.makeDiv("RADIOBUTTON"),c=document.createElement("input");s.default.addClass(c,"RADIO");var f="dt_id_"+h++,p="dt_id_"+h++;c.type="radio",c.id=f,c.name=this.variable,c.value=u.toString(),c.setAttribute("aria-labelledby",p),this.radioButtons.push(c);var y=document.createElement("label");s.default.addClass(y,"LABEL"),y.id=p,y.setAttribute("for",f),y.innerHTML=l,d.appendChild(c),d.appendChild(y),this.card.content.appendChild(d)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.buttons=function(){this.parent&&s.default.makeButton(this.previousName,this.firePrevious.bind(this),this.card.buttons,"PREVIOUS"),s.default.makeButton(this.nextName,this.fireNext.bind(this),this.card.buttons,"NEXT")},t.prototype.fireNext=function(){var t,e;try{for(var n=o(this.radioButtons),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.checked){var a=i.value,s=parseInt(a,10);return this.tree.history.push(s),this.hide(),void this.children.get(s).show()}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.firePrevious=function(){this.parent&&(this.hide(),this.parent.show())},t.prototype.show=function(){this.card.show()},t.prototype.hide=function(){this.card.hide()},t}();e.Node=c;var f=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e,n,r,[{text:"Yes",value:1},{text:"No",value:0}])||this;return i.content=e,i.title=n,i.value=r,i.kind="binary",i}return i(e,t),e}(c);e.Binary=f;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.kind="nary",e}return i(e,t),e}(c);e.Nary=p;var y=function(t){function e(e,n,r,i){void 0===i&&(i="");var o=t.call(this,e,n,r)||this;return o.action=i,o.kind="leaf",o.nextName="Restart",o}return i(e,t),e.prototype.buttons=function(){t.prototype.buttons.call(this),this.summaryButton=s.default.makeButton("Summary",this.fireSummary.bind(this),this.card.buttons),this.action&&(this.actionButton=s.default.makeButton("Go",this.fireAction.bind(this),this.card.buttons,"ACTION"),document.createElement("button"))},e.prototype.fireAction=function(){window.open(this.action,"_blank")},e.prototype.fireSummary=function(){this.tree.summary(this)},e.prototype.fireNext=function(){this.hide(),this.tree.root.show(),this.tree.history=[]},e}(c);e.Leaf=y;var m=function(t){function e(){var e=t.call(this,"","Summary")||this;return e.kind="summary",e.nextName="Restart",e.summaryElement=s.default.makeDiv("SUMMARY"),e.card.content.appendChild(e.summaryElement),e}return i(e,t),e.prototype.fireNext=function(){this.hide(),this.tree.root.show(),this.tree.history=[]},e.prototype.show=function(){t.prototype.show.call(this),this.compileSummary()},e.prototype.compileSummary=function(){var t=this,e=0,n=this.tree.history.length,r=this.parent,i=[];this.summaryElement.innerHTML="";do{var o=e?r.labels.get(this.tree.history[n-e]):"";i.unshift(this.makeSummaryLine(r.content,o)),r=r.parent,e++}while(r);i.forEach((function(e){return t.summaryElement.appendChild(e)}))},e.prototype.makeSummaryLine=function(t,e){var n=s.default.makeDiv("SUMMARYLINE");return s.default.makeSpan(n,t,"QUESTION"),s.default.makeSpan(n,e,"ANSWER"),n},e}(c);e.Summary=m;var v=function(){function t(){this.div=s.default.makeDiv("NODE"),this.title=s.default.makeH1("TITLE"),this.content=s.default.makeDiv("CONTENT"),this.buttons=s.default.makeDiv("BUTTONS"),this.div.appendChild(this.title),this.title.setAttribute("tabindex","-1"),this.div.appendChild(this.content),this.content.setAttribute("tabindex","-1"),this.div.appendChild(this.buttons)}return t.prototype.show=function(){this.div.style.display="block",this.content.setAttribute("tabindex","0"),this.title.setAttribute("aria-live","polite"),this.title.setAttribute("tabindex","0")},t.prototype.hide=function(){this.div.style.display="none",this.content.setAttribute("tabindex","-1"),this.title.removeAttribute("aria-live"),this.title.setAttribute("tabindex","-1")},t}();e.Card=v},"./ts/util.ts":
/*!********************!*\
  !*** ./ts/util.ts ***!
  \********************/
/*! no static exports found */function(t,e,n){"use strict";var r,i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.makeButton=function(e,n,r,i){void 0===i&&(i="");var o=document.createElement("button");return o.innerHTML=e,t.addClass(o,i||e.toUpperCase(),"BUTTON"),o.addEventListener("click",n),r.appendChild(o),o};t.addClass=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e.forEach((function(e){return t.classList.add("DT_"+e.toUpperCase())}))},t.makeDiv=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=document.createElement("div");return t.addClass.apply(void 0,o([r],e)),r},t.makeH1=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=document.createElement("h1");return t.addClass.apply(void 0,o([r],e)),r},t.makeSpan=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=document.createElement("span");t.addClass.apply(void 0,o([a],r)),a.innerHTML=n,e.appendChild(a)}}(r||(r={})),e.default=r}})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWNpc2lvbnRyZWUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2RlY2lzaW9udHJlZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9kZWNpc2lvbnRyZWUvLi90cy9pbmRleC50cyIsIndlYnBhY2s6Ly9kZWNpc2lvbnRyZWUvLi90cy90cmVlLnRzIiwid2VicGFjazovL2RlY2lzaW9udHJlZS8uL3RzL3V0aWwudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJUcmVlIiwianNvblN0ciIsImhpc3RvcnkiLCJzdW1tYXJ5RWxlbWVudCIsIlN1bW1hcnkiLCJsb2FkSnNvbiIsInVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaHR0cFJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJfbG9hZEpzb24iLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwib25lcnJvciIsIm9wZW4iLCJzZW5kIiwianNvbiIsImZyb21Kc29uIiwiZXJyIiwiTm9kZSIsIkpTT04iLCJwYXJzZSIsIkRlcHRoRmlyc3QiLCJ4IiwicmVzdWx0IiwiZm9yRWFjaCIsInRyZWUiLCJwYXJlbnQiLCJ0b0hUTUwiLCJub2RlIiwicm9vdEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInRvSHRtbCIsImhpZGUiLCJzaG93Iiwic3VtbWFyeSIsImZ1bmMiLCJ2aXNpdCIsInB1c2giLCJjaGlsZHJlbiIsImNvdW50ZXIiLCJsYWJlbENvdW50ZXIiLCJjb250ZW50IiwidGl0bGUiLCJsYWJlbHMiLCJraW5kIiwiTWFwIiwidmFyaWFibGUiLCJyYWRpb0J1dHRvbnMiLCJuZXh0TmFtZSIsInByZXZpb3VzTmFtZSIsImNhcmQiLCJDYXJkIiwidGV4dCIsInNldCIsInBhcnNlQ2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZCIsImNoaWxkTm9kZSIsInR5cGUiLCJMZWFmIiwiYWN0aW9uIiwiTmFyeSIsIkJpbmFyeSIsIkVycm9yIiwiYWRkQ2xhc3MiLCJkaXYiLCJpbm5lckhUTUwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJyYWRpb3MiLCJidXR0b25zIiwibWFrZURpdiIsInJhZGlvIiwicmFkaW9JZCIsImxhYmVsSWQiLCJpZCIsInRvU3RyaW5nIiwic2V0QXR0cmlidXRlIiwibGFiZWwiLCJtYWtlQnV0dG9uIiwiZmlyZVByZXZpb3VzIiwiZmlyZU5leHQiLCJjaGVja2VkIiwibnVtIiwicGFyc2VJbnQiLCJzdW1tYXJ5QnV0dG9uIiwiZmlyZVN1bW1hcnkiLCJhY3Rpb25CdXR0b24iLCJmaXJlQWN0aW9uIiwid2luZG93IiwiY29tcGlsZVN1bW1hcnkiLCJjb3VudCIsImhsIiwiYW5zd2VyIiwidW5zaGlmdCIsIm1ha2VTdW1tYXJ5TGluZSIsInF1ZXN0aW9uIiwibWFrZVNwYW4iLCJtYWtlSDEiLCJzdHlsZSIsImRpc3BsYXkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJVdGlsIiwiY2xhc3NuYW1lIiwiYnV0dG9uIiwidG9VcHBlckNhc2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZWxlbWVudCIsInJlc3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJzcGFuIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RBLFFBQXNCLGFBQUlELElBRTFCRCxFQUFtQixhQUFJQyxJQVJ6QixDQVNHSyxNQUFNLFdBQ1QsTyxZQ1RFLElBQUlDLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVQLFFBR25DLElBQUlDLEVBQVNJLEVBQWlCRSxHQUFZLENBQ3pDQyxFQUFHRCxFQUNIRSxHQUFHLEVBQ0hULFFBQVMsSUFVVixPQU5BVSxFQUFRSCxHQUFVSSxLQUFLVixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTTSxHQUcvREwsRUFBT1EsR0FBSSxFQUdKUixFQUFPRCxRQTBEZixPQXJEQU0sRUFBb0JNLEVBQUlGLEVBR3hCSixFQUFvQk8sRUFBSVIsRUFHeEJDLEVBQW9CUSxFQUFJLFNBQVNkLEVBQVNlLEVBQU1DLEdBQzNDVixFQUFvQlcsRUFBRWpCLEVBQVNlLElBQ2xDRyxPQUFPQyxlQUFlbkIsRUFBU2UsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFVixFQUFvQmdCLEVBQUksU0FBU3RCLEdBQ1gsb0JBQVh1QixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWVuQixFQUFTdUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlbkIsRUFBUyxhQUFjLENBQUV5QixPQUFPLEtBUXZEbkIsRUFBb0JvQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUW5CLEVBQW9CbUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkF4QixFQUFvQmdCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQsWUFBWSxFQUFNSyxNQUFPQSxJQUN0RCxFQUFQRSxHQUE0QixpQkFBVEYsRUFBbUIsSUFBSSxJQUFJTSxLQUFPTixFQUFPbkIsRUFBb0JRLEVBQUVlLEVBQUlFLEVBQUssU0FBU0EsR0FBTyxPQUFPTixFQUFNTSxJQUFRQyxLQUFLLEtBQU1ELElBQzlJLE9BQU9GLEdBSVJ2QixFQUFvQjJCLEVBQUksU0FBU2hDLEdBQ2hDLElBQUllLEVBQVNmLEdBQVVBLEVBQU8yQixXQUM3QixXQUF3QixPQUFPM0IsRUFBZ0IsU0FDL0MsV0FBOEIsT0FBT0EsR0FFdEMsT0FEQUssRUFBb0JRLEVBQUVFLEVBQVEsSUFBS0EsR0FDNUJBLEdBSVJWLEVBQW9CVyxFQUFJLFNBQVNpQixFQUFRQyxHQUFZLE9BQU9qQixPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1QixFQUFRQyxJQUd6RzdCLEVBQW9CZ0MsRUFBSSxHQUlqQmhDLEVBQW9CQSxFQUFvQmlDLEVBQUksaUI7Ozs7MEhDbEZyRCxxQ0FFVyxFQUFBQyxLQUFPLFE7Ozs7b25DQ0RsQixxQ0FHQSwwQkFFUyxLQUFBQyxRQUFrQixHQUNsQixLQUFBM0MsS0FBYSxLQUNiLEtBQUE0QyxRQUFvQixHQUVwQixLQUFBQyxlQUEwQixJQUFJQyxFQTREdkMsT0ExRFMsWUFBQUMsU0FBUCxTQUFnQkMsR0FBaEIsV0FDRSxPQUFPLElBQUlDLFNBQVEsU0FBQ0MsRUFBU0MsR0FDM0IsSUFBSUMsRUFBYyxJQUFJQyxlQUN0QkQsRUFBWUUsbUJBQXFCLFdBQ0EsSUFBM0JGLEVBQVlHLGFBQ2EsTUFBdkJILEVBQVlJLE9BQ2RsRCxLQUFLbUQsVUFBVUwsRUFBWU0sYUFBY1IsRUFBU0MsR0FFbERBLEVBQU9DLEVBQVlPLGNBR3ZCekIsS0FBSyxHQUNQa0IsRUFBWVEsUUFBVSxXQUNwQlQsRUFBT0MsRUFBWU8sYUFDbkJ6QixLQUFLLEdBQ1BrQixFQUFZUyxLQUFLLE1BQU9iLEdBQUssR0FDN0JJLEVBQVlVLFdBSVQsWUFBQUwsVUFBUCxTQUFpQk0sRUFBY2IsRUFBbUJDLEdBQ2hELElBQ0U3QyxLQUFLcUMsUUFBVW9CLEVBQ2Z6RCxLQUFLMEQsV0FDTGQsRUFBUSxlQUNSLE1BQU9lLEdBQ1BkLEVBQU8sd0JBS0osWUFBQWEsU0FBUCxzQkFDRTFELEtBQUtOLEtBQU9rRSxFQUFLRixTQUFTRyxLQUFLQyxNQUFNOUQsS0FBS3FDLFVBQ2hDLElBQUkwQixFQUFXL0QsTUFBTSxTQUFDZ0UsR0FBWSxPQUFBQSxLQUN4Q0MsT0FBT0MsU0FBUSxTQUFBckMsR0FBSyxPQUFBQSxFQUFFc0MsS0FBTyxLQUNqQ25FLEtBQUt1QyxlQUFlNkIsT0FBU3BFLEtBQUtOLEtBQ2xDTSxLQUFLdUMsZUFBZTRCLEtBQU9uRSxNQUl0QixZQUFBcUUsT0FBUCxTQUFjQyxRQUFBLElBQUFBLE1BQUEsTUFDWnRFLEtBQUt1RSxZQUFjRCxFQUNULElBQUlQLEVBQVcvRCxNQUFNLFNBQUNnRSxHQUFZLE9BQUFBLEtBQ3hDQyxPQUFPQyxTQUFRLFNBQUNyQyxHQUNsQnlDLEVBQUtFLFlBQVkzQyxFQUFFNEMsVUFDbkI1QyxFQUFFNkMsVUFFSkosRUFBS0UsWUFBWXhFLEtBQUt1QyxlQUFla0MsVUFDckN6RSxLQUFLdUMsZUFBZW1DLE9BQ3BCMUUsS0FBS04sS0FBS2lGLFFBR0wsWUFBQUMsUUFBUCxTQUFlTixHQUNiQSxFQUFLSSxPQUNMMUUsS0FBS3VDLGVBQWU2QixPQUFTRSxFQUM3QnRFLEtBQUt1QyxlQUFlb0MsUUFHeEIsRUFsRUEsR0FBYSxFQUFBdkMsT0FxRWIsaUJBSUUsV0FBWStCLEVBQW9CVSxHQUFBLEtBQUFBLE9BRnpCLEtBQUFaLE9BQWdCLEdBR3JCakUsS0FBSzhFLE1BQU1YLEVBQUt6RSxNQVFwQixPQUxVLFlBQUFvRixNQUFSLFNBQWNSLEdBQWQsV0FDRXRFLEtBQUtpRSxPQUFPYyxLQUFLL0UsS0FBSzZFLEtBQUtQLElBQzNCQSxFQUFLVSxTQUFTZCxTQUFRLFNBQUFGLEdBQUssU0FBS2MsTUFBTWQsT0FHMUMsRUFiQSxHQUFhLEVBQUFELGFBZ0JiLElBQUlrQixFQUFVLEVBQ1ZDLEVBQWUsRUFFbkIsYUFjRSxXQUFtQkMsRUFBd0JDLEVBQ3hCL0QsRUFDUGdFLEcsYUFGK0IsSUFBQUQsTUFBQSxTQUN4QixJQUFBL0QsTUFBQSxRQUNQLElBQUFnRSxNQUFBLElBRk8sS0FBQUYsVUFBd0IsS0FBQUMsUUFDeEIsS0FBQS9ELFFBYlosS0FBQWlFLEtBQWUsR0FFZixLQUFBRCxPQUE4QixJQUFJRSxJQUNsQyxLQUFBUCxTQUE4QixJQUFJTyxJQUNsQyxLQUFBbkIsT0FBZSxLQUNmLEtBQUFvQixTQUFtQixlQUFpQlAsSUFFcEMsS0FBQVEsYUFBOEIsR0FFOUIsS0FBQUMsU0FBbUIsT0FDbkIsS0FBQUMsYUFBdUIsT0FLNUIzRixLQUFLNEYsS0FBTyxJQUFJQyxFLElBQ2hCLElBQXVDLFFBQUFSLEdBQU0sOEJBQUUsQ0FBdEMsY0FBT1MsRUFBSSxPQUFTLEVBQUssUUFDaEM5RixLQUFLcUYsT0FBT1UsSUFBSSxFQUFPRCxJLGtHQWlIN0IsT0E3R2lCLEVBQUFFLGNBQWYsU0FBNkIxQixFQUFZYixHLFFBQ3ZDLEdBQUtBLEdBQVNBLEVBQUt3QyxPLElBR25CLElBQW9CLFFBQUF4QyxHQUFJLDhCQUFFLENBQXJCLElBQU15QyxFQUFLLFFBQ1ZDLEVBQVl2QyxFQUFLRixTQUFTd0MsR0FDOUI1QixFQUFLVSxTQUFTZSxJQUFJSSxFQUFVOUUsTUFBTzhFLEdBQ25DQSxFQUFVL0IsT0FBU0UsRyxtR0FJaEIsRUFBQVosU0FBUCxTQUFnQkQsR0FDZCxJQUNJYSxFQUFhLEtBQ2pCLE9BRldiLEVBQUsyQyxNQUFRLFFBR3RCLElBQUssT0FDSDlCLEVBQU8sSUFBSStCLEVBQUs1QyxFQUFLMEIsUUFBUzFCLEVBQUsyQixNQUFPM0IsRUFBS3BDLE1BQU9vQyxFQUFLNkMsUUFDM0QsTUFDRixJQUFLLE9BQ0hoQyxFQUFPLElBQUlpQyxFQUFLOUMsRUFBSzBCLFFBQVMxQixFQUFLMkIsTUFBTzNCLEVBQUtwQyxNQUFPb0MsRUFBSzRCLFFBQVUsSUFDckV6QixFQUFLb0MsY0FBYzFCLEVBQU1iLEVBQUt1QixVQUM5QixNQUNGLElBQUssU0FDSFYsRUFBTyxJQUFJa0MsRUFBTy9DLEVBQUswQixRQUFTMUIsRUFBSzJCLE1BQU8zQixFQUFLcEMsT0FDakR1QyxFQUFLb0MsY0FBYzFCLEVBQU1iLEVBQUt1QixVQUM5QixNQUNGLFFBQ0UsTUFBTXlCLE1BQU0sc0JBRWhCLE9BQU9uQyxHQUdGLFlBQUFHLE9BQVAsV0FDRSxVQUFLaUMsU0FBUzFHLEtBQUs0RixLQUFLZSxJQUFLM0csS0FBS3NGLE1BRWxDdEYsS0FBSzRGLEtBQUtSLE1BQU13QixVQUFZNUcsS0FBS29GLE1BRWpDLElBQUlELEVBQVUwQixTQUFTQyxjQUFjLFFBTXJDLE9BTEEsVUFBS0osU0FBU3ZCLEVBQVMsV0FDdkJBLEVBQVF5QixVQUFZNUcsS0FBS21GLFFBQ3pCbkYsS0FBSzRGLEtBQUtULFFBQVFYLFlBQVlXLEdBQzlCbkYsS0FBSytHLFNBQ0wvRyxLQUFLZ0gsVUFDRWhILEtBQUs0RixLQUFLZSxLQUlULFlBQUFJLE9BQVYsVyxZQUNFLElBQTJCLFFBQUEvRyxLQUFLcUYsUUFBTSw4QkFBRSxDQUE3QixtQkFBQzFELEVBQUcsS0FBRU4sRUFBSyxLQUNoQjhELEVBQVUsVUFBSzhCLFFBQVEsZUFDdkJDLEVBQVFMLFNBQVNDLGNBQWMsU0FDbkMsVUFBS0osU0FBU1EsRUFBTyxTQUNyQixJQUFJQyxFQUFVLFNBQVdqQyxJQUNyQmtDLEVBQVUsU0FBV2xDLElBQ3pCZ0MsRUFBTWQsS0FBTyxRQUNiYyxFQUFNRyxHQUFLRixFQUNYRCxFQUFNdkcsS0FBT1gsS0FBS3dGLFNBQ2xCMEIsRUFBTTdGLE1BQVFNLEVBQUkyRixXQUNsQkosRUFBTUssYUFBYSxrQkFBbUJILEdBQ3RDcEgsS0FBS3lGLGFBQWFWLEtBQUttQyxHQUN2QixJQUFJTSxFQUFRWCxTQUFTQyxjQUFjLFNBQ25DLFVBQUtKLFNBQVNjLEVBQU8sU0FDckJBLEVBQU1ILEdBQUtELEVBQ1hJLEVBQU1ELGFBQWEsTUFBT0osR0FDMUJLLEVBQU1aLFVBQVl2RixFQUNsQjhELEVBQVFYLFlBQVkwQyxHQUNwQi9CLEVBQVFYLFlBQVlnRCxHQUNwQnhILEtBQUs0RixLQUFLVCxRQUFRWCxZQUFZVyxJLG1HQUl4QixZQUFBNkIsUUFBVixXQUNNaEgsS0FBS29FLFFBQ1AsVUFBS3FELFdBQ0h6SCxLQUFLMkYsYUFBYzNGLEtBQUswSCxhQUFhOUYsS0FBSzVCLE1BQU9BLEtBQUs0RixLQUFLb0IsUUFBUyxZQUV4RSxVQUFLUyxXQUFXekgsS0FBSzBGLFNBQVUxRixLQUFLMkgsU0FBUy9GLEtBQUs1QixNQUFPQSxLQUFLNEYsS0FBS29CLFFBQVMsU0FHcEUsWUFBQVcsU0FBVixXLFlBQ0UsSUFBa0IsUUFBQTNILEtBQUt5RixjQUFZLDhCQUFFLENBQWhDLElBQUl5QixFQUFLLFFBQ1osR0FBS0EsRUFBY1UsUUFBUyxDQUMxQixJQUFJdkcsRUFBUzZGLEVBQWM3RixNQUN2QndHLEVBQU1DLFNBQVN6RyxFQUFPLElBSTFCLE9BSEFyQixLQUFLbUUsS0FBSzdCLFFBQVF5QyxLQUFLOEMsR0FDdkI3SCxLQUFLMEUsWUFDTDFFLEtBQUtnRixTQUFTL0QsSUFBSTRHLEdBQUtsRCxTLG1HQU1uQixZQUFBK0MsYUFBVixXQUNNMUgsS0FBS29FLFNBQ1BwRSxLQUFLMEUsT0FDTDFFLEtBQUtvRSxPQUFPTyxTQU1ULFlBQUFBLEtBQVAsV0FDRTNFLEtBQUs0RixLQUFLakIsUUFHTCxZQUFBRCxLQUFQLFdBQ0UxRSxLQUFLNEYsS0FBS2xCLFFBR2QsRUFwSUEsR0FBc0IsRUFBQWQsT0FzSXRCLGtCQU9FLFdBQW1CdUIsRUFBd0JDLEVBQXNCL0QsUUFBQSxJQUFBQSxNQUFBLEdBQWpFLE1BQ0UsWUFBTThELEVBQVNDLEVBQU8vRCxFQUNoQixDQUFDLENBQUN5RSxLQUFNLE1BQU96RSxNQUFPLEdBQUksQ0FBQ3lFLEtBQU0sS0FBTXpFLE1BQU8sTUFBSSxLLE9BRnZDLEVBQUE4RCxVQUF3QixFQUFBQyxRQUFzQixFQUFBL0QsUUFGMUQsRUFBQWlFLEtBQU8sUyxFQU9oQixPQVo0QixPQVk1QixFQVpBLENBQTRCMUIsR0FBZixFQUFBNEMsU0FlYiw2RSxPQUNTLEVBQUFsQixLQUFPLE8sRUFFaEIsT0FIMEIsT0FHMUIsRUFIQSxDQUEwQjFCLEdBQWIsRUFBQTJDLE9BTWIsa0JBTUUsV0FBWXBCLEVBQWlCQyxFQUFlL0QsRUFDekJpRixRQUFBLElBQUFBLE1BQUEsSUFEbkIsTUFFRSxZQUFNbkIsRUFBU0MsRUFBTy9ELElBQU0sSyxPQURYLEVBQUFpRixTQU5aLEVBQUFoQixLQUFPLE9BQ1AsRUFBQUksU0FBVyxVLEVBbUNwQixPQXJDMEIsT0FZZCxZQUFBc0IsUUFBVixXQUNFLFlBQU1BLFFBQU8sV0FDYmhILEtBQUsrSCxjQUFnQixVQUFLTixXQUN4QixVQUFXekgsS0FBS2dJLFlBQVlwRyxLQUFLNUIsTUFBT0EsS0FBSzRGLEtBQUtvQixTQUNoRGhILEtBQUtzRyxTQUNQdEcsS0FBS2lJLGFBQWUsVUFBS1IsV0FDdkIsS0FBTXpILEtBQUtrSSxXQUFXdEcsS0FBSzVCLE1BQU9BLEtBQUs0RixLQUFLb0IsUUFBUyxVQUN2REgsU0FBU0MsY0FBYyxZQUlqQixZQUFBb0IsV0FBVixXQUNFQyxPQUFPNUUsS0FBS3ZELEtBQUtzRyxPQUFRLFdBR2pCLFlBQUEwQixZQUFWLFdBQ0VoSSxLQUFLbUUsS0FBS1MsUUFBUTVFLE9BR1YsWUFBQTJILFNBQVYsV0FDRTNILEtBQUswRSxPQUNMMUUsS0FBS21FLEtBQUt6RSxLQUFLaUYsT0FDZjNFLEtBQUttRSxLQUFLN0IsUUFBVSxJQUd4QixFQXJDQSxDQUEwQnNCLEdBQWIsRUFBQXlDLE9Bd0NiLGtCQU1FLG1CQUNFLFlBQU0sR0FBSSxZQUFVLEssT0FMZixFQUFBZixLQUFPLFVBQ1AsRUFBQUksU0FBVyxVQUNYLEVBQUFuRCxlQUFpQixVQUFLMEUsUUFBUSxXQUluQyxFQUFLckIsS0FBS1QsUUFBUVgsWUFBWSxFQUFLakMsZ0IsRUFvQ3ZDLE9BNUM2QixPQVdqQixZQUFBb0YsU0FBVixXQUNFM0gsS0FBSzBFLE9BQ0wxRSxLQUFLbUUsS0FBS3pFLEtBQUtpRixPQUNmM0UsS0FBS21FLEtBQUs3QixRQUFVLElBR2YsWUFBQXFDLEtBQVAsV0FDRSxZQUFNQSxLQUFJLFdBQ1YzRSxLQUFLb0ksa0JBR0MsWUFBQUEsZUFBUixzQkFDTUMsRUFBUSxFQUNSQyxFQUFLdEksS0FBS21FLEtBQUs3QixRQUFRMkQsT0FDdkIzQixFQUFPdEUsS0FBS29FLE9BQ1pILEVBQVMsR0FDYmpFLEtBQUt1QyxlQUFlcUUsVUFBWSxHQUNoQyxFQUFHLENBQ0QsSUFBSTJCLEVBQVNGLEVBQVEvRCxFQUFLZSxPQUFPcEUsSUFBSWpCLEtBQUttRSxLQUFLN0IsUUFBUWdHLEVBQUtELElBQVUsR0FDdEVwRSxFQUFPdUUsUUFBUXhJLEtBQUt5SSxnQkFBZ0JuRSxFQUFLYSxRQUFTb0QsSUFDbERqRSxFQUFPQSxFQUFLRixPQUNaaUUsVUFDTy9ELEdBQ1RMLEVBQU9DLFNBQVEsU0FBQUYsR0FBSyxTQUFLekIsZUFBZWlDLFlBQVlSLE9BRzlDLFlBQUF5RSxnQkFBUixTQUF3QkMsRUFBa0JILEdBQ3hDLElBQUk1QixFQUFNLFVBQUtNLFFBQVEsZUFHdkIsT0FGQSxVQUFLMEIsU0FBU2hDLEVBQUsrQixFQUFVLFlBQzdCLFVBQUtDLFNBQVNoQyxFQUFLNEIsRUFBUSxVQUNwQjVCLEdBR1gsRUE1Q0EsQ0FBNkIvQyxHQUFoQixFQUFBcEIsVUE4Q2IsaUJBT0UsYUFMTyxLQUFBbUUsSUFBbUIsVUFBS00sUUFBUSxRQUNoQyxLQUFBN0IsTUFBcUIsVUFBS3dELE9BQU8sU0FDakMsS0FBQXpELFFBQXVCLFVBQUs4QixRQUFRLFdBQ3BDLEtBQUFELFFBQXVCLFVBQUtDLFFBQVEsV0FHekNqSCxLQUFLMkcsSUFBSW5DLFlBQVl4RSxLQUFLb0YsT0FDMUJwRixLQUFLb0YsTUFBTW1DLGFBQWEsV0FBWSxNQUNwQ3ZILEtBQUsyRyxJQUFJbkMsWUFBWXhFLEtBQUttRixTQUMxQm5GLEtBQUttRixRQUFRb0MsYUFBYSxXQUFZLE1BQ3RDdkgsS0FBSzJHLElBQUluQyxZQUFZeEUsS0FBS2dILFNBaUI5QixPQWRTLFlBQUFyQyxLQUFQLFdBQ0UzRSxLQUFLMkcsSUFBSWtDLE1BQU1DLFFBQVUsUUFDekI5SSxLQUFLbUYsUUFBUW9DLGFBQWEsV0FBWSxLQUN0Q3ZILEtBQUtvRixNQUFNbUMsYUFBYSxZQUFhLFVBQ3JDdkgsS0FBS29GLE1BQU1tQyxhQUFhLFdBQVksTUFHL0IsWUFBQTdDLEtBQVAsV0FDRTFFLEtBQUsyRyxJQUFJa0MsTUFBTUMsUUFBVSxPQUN6QjlJLEtBQUttRixRQUFRb0MsYUFBYSxXQUFZLE1BQ3RDdkgsS0FBS29GLE1BQU0yRCxnQkFBZ0IsYUFDM0IvSSxLQUFLb0YsTUFBTW1DLGFBQWEsV0FBWSxPQUd4QyxFQTdCQSxHQUFhLEVBQUExQixROzs7OytEQzdVSG1ELEUsOGNBQVYsU0FBVUEsR0FFSyxFQUFBdkIsV0FBYSxTQUN4QjlHLEVBQWMyRixFQUFtQmxDLEVBQ2pDNkUsUUFBQSxJQUFBQSxNQUFBLElBQ0EsSUFBSUMsRUFBU3JDLFNBQVNDLGNBQWMsVUFLcEMsT0FKQW9DLEVBQU90QyxVQUFZakcsRUFDbkIsRUFBQStGLFNBQVN3QyxFQUFRRCxHQUFhdEksRUFBS3dJLGNBQWUsVUFDbERELEVBQU9FLGlCQUFpQixRQUFTOUMsR0FDakNsQyxFQUFPSSxZQUFZMEUsR0FDWkEsR0FLSSxFQUFBeEMsU0FBVyxTQUFTMkMsRyxJQUFzQix3REFDckRDLEVBQUtwRixTQUFRLFNBQUFGLEdBQUssT0FBQXFGLEVBQVFFLFVBQVVDLElBSHpCLE1BR3NDeEYsRUFBRW1GLG1CQUd4QyxFQUFBbEMsUUFBVSxXLElBQVMsc0RBQzlCLElBQUlOLEVBQU1FLFNBQVNDLGNBQWMsT0FFakMsT0FEQSxFQUFBSixTQUFRLGdCQUFDQyxHQUFRc0MsSUFDVnRDLEdBR0ksRUFBQWlDLE9BQVMsVyxJQUFTLHNEQUM3QixJQUFJakMsRUFBTUUsU0FBU0MsY0FBYyxNQUVqQyxPQURBLEVBQUFKLFNBQVEsZ0JBQUNDLEdBQVFzQyxJQUNWdEMsR0FHSSxFQUFBZ0MsU0FBVyxTQUN0QnZFLEVBQXFCZSxHLElBQWlCLHdEQUN0QyxJQUFJc0UsRUFBTzVDLFNBQVNDLGNBQWMsUUFDbEMsRUFBQUosU0FBUSxnQkFBQytDLEdBQVNSLElBQ2xCUSxFQUFLN0MsVUFBWXpCLEVBQ2pCZixFQUFPSSxZQUFZaUYsSUFwQ3ZCLENBQVVULE1BQUksS0F5Q2QsVUFBZUEiLCJmaWxlIjoiZGVjaXNpb250cmVlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZGVjaXNpb250cmVlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImRlY2lzaW9udHJlZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vdHMvaW5kZXgudHNcIik7XG4iLCJpbXBvcnQge1RyZWUgYXMgb2JqMH0gZnJvbSAnLi90cmVlJztcblxuZXhwb3J0IGxldCBUcmVlID0gb2JqMDtcbiIsIi8vIEluaXRpYWwgdHJlZVxuaW1wb3J0IFV0aWwgZnJvbSAnLi91dGlsJztcblxuXG5leHBvcnQgY2xhc3MgVHJlZSB7XG5cbiAgcHVibGljIGpzb25TdHI6IHN0cmluZyA9ICcnO1xuICBwdWJsaWMgcm9vdDogTm9kZSA9IG51bGw7XG4gIHB1YmxpYyBoaXN0b3J5OiBudW1iZXJbXSA9IFtdO1xuICBwdWJsaWMgcm9vdEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwdWJsaWMgc3VtbWFyeUVsZW1lbnQ6IFN1bW1hcnkgPSBuZXcgU3VtbWFyeSgpO1xuXG4gIHB1YmxpYyBsb2FkSnNvbih1cmw6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgaHR0cFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIGh0dHBSZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaHR0cFJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgIGlmIChodHRwUmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgdGhpcy5fbG9hZEpzb24oaHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0LCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QoaHR0cFJlcXVlc3Quc3RhdHVzVGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LmJpbmQodGhpcyk7XG4gICAgICBodHRwUmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChodHRwUmVxdWVzdC5zdGF0dXNUZXh0KTtcbiAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgIGh0dHBSZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICBodHRwUmVxdWVzdC5zZW5kKCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgX2xvYWRKc29uKGpzb246IHN0cmluZywgcmVzb2x2ZTogRnVuY3Rpb24sIHJlamVjdDogRnVuY3Rpb24pIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5qc29uU3RyID0ganNvbjtcbiAgICAgIHRoaXMuZnJvbUpzb24oKTtcbiAgICAgIHJlc29sdmUoJ0pTT04gbG9hZGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZWplY3QoJ0pTT04gUGFyc2VyIEVycm9yIScpO1xuICAgIH1cbiAgfVxuXG5cbiAgcHVibGljIGZyb21Kc29uKCkge1xuICAgIHRoaXMucm9vdCA9IE5vZGUuZnJvbUpzb24oSlNPTi5wYXJzZSh0aGlzLmpzb25TdHIpKTtcbiAgICBsZXQgZGZzID0gbmV3IERlcHRoRmlyc3QodGhpcywgKHg6IE5vZGUpID0+IHgpO1xuICAgIGRmcy5yZXN1bHQuZm9yRWFjaChuID0+IG4udHJlZSA9IHRoaXMpO1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQucGFyZW50ID0gdGhpcy5yb290O1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQudHJlZSA9IHRoaXM7XG4gIH1cblxuXG4gIHB1YmxpYyB0b0hUTUwobm9kZTogSFRNTEVsZW1lbnQgPSBudWxsKSB7XG4gICAgdGhpcy5yb290RWxlbWVudCA9IG5vZGU7XG4gICAgbGV0IGRmcyA9IG5ldyBEZXB0aEZpcnN0KHRoaXMsICh4OiBOb2RlKSA9PiB4KTtcbiAgICBkZnMucmVzdWx0LmZvckVhY2goKG46IE5vZGUpID0+IHtcbiAgICAgIG5vZGUuYXBwZW5kQ2hpbGQobi50b0h0bWwoKSk7XG4gICAgICBuLmhpZGUoKTtcbiAgICB9KTtcbiAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMuc3VtbWFyeUVsZW1lbnQudG9IdG1sKCkpO1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQuaGlkZSgpO1xuICAgIHRoaXMucm9vdC5zaG93KCk7XG4gIH1cblxuICBwdWJsaWMgc3VtbWFyeShub2RlOiBOb2RlKSB7XG4gICAgbm9kZS5oaWRlKCk7XG4gICAgdGhpcy5zdW1tYXJ5RWxlbWVudC5wYXJlbnQgPSBub2RlO1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQuc2hvdygpO1xuICB9XG5cbn1cblxuXG5leHBvcnQgY2xhc3MgRGVwdGhGaXJzdCB7XG5cbiAgcHVibGljIHJlc3VsdDogYW55W10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcih0cmVlOiBUcmVlLCBwcml2YXRlIGZ1bmM6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy52aXNpdCh0cmVlLnJvb3QpO1xuICB9XG5cbiAgcHJpdmF0ZSB2aXNpdChub2RlOiBOb2RlKSB7XG4gICAgdGhpcy5yZXN1bHQucHVzaCh0aGlzLmZ1bmMobm9kZSkpO1xuICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaCh4ID0+IHRoaXMudmlzaXQoeCkpO1xuICB9XG5cbn1cblxuXG5sZXQgY291bnRlciA9IDA7XG5sZXQgbGFiZWxDb3VudGVyID0gMDtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE5vZGUge1xuXG4gIHB1YmxpYyBraW5kOiBzdHJpbmcgPSAnJztcbiAgcHVibGljIHRyZWU6IFRyZWU7XG4gIHB1YmxpYyBsYWJlbHM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwPG51bWJlciwgc3RyaW5nPigpO1xuICBwdWJsaWMgY2hpbGRyZW46IE1hcDxudW1iZXIsIE5vZGU+ID0gbmV3IE1hcDxudW1iZXIsIE5vZGU+KCk7XG4gIHB1YmxpYyBwYXJlbnQ6IE5vZGUgPSBudWxsO1xuICBwdWJsaWMgdmFyaWFibGU6IHN0cmluZyA9ICdkdF92YXJpYWJsZV8nICsgY291bnRlcisrO1xuICBwdWJsaWMgY2FyZDogQ2FyZDtcbiAgcHVibGljIHJhZGlvQnV0dG9uczogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXG4gIHB1YmxpYyBuZXh0TmFtZTogc3RyaW5nID0gJ05leHQnO1xuICBwdWJsaWMgcHJldmlvdXNOYW1lOiBzdHJpbmcgPSAnQmFjayc7XG5cbiAgY29uc3RydWN0b3IocHVibGljIGNvbnRlbnQ6IHN0cmluZywgcHVibGljIHRpdGxlOiBzdHJpbmcgPSAnJyxcbiAgICAgICAgICAgICAgcHVibGljIHZhbHVlID0gMCxcbiAgICAgICAgICAgICAgbGFiZWxzOiB7dGV4dDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyfVtdID0gW10pIHtcbiAgICB0aGlzLmNhcmQgPSBuZXcgQ2FyZCgpO1xuICAgIGZvciAobGV0IHt0ZXh0OiB0ZXh0LCB2YWx1ZTogdmFsdWV9IG9mIGxhYmVscykge1xuICAgICAgdGhpcy5sYWJlbHMuc2V0KHZhbHVlLCB0ZXh0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBwYXJzZUNoaWxkcmVuKG5vZGU6IE5vZGUsIGpzb246IGFueVtdKSB7XG4gICAgaWYgKCFqc29uIHx8ICFqc29uLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGpzb24pIHtcbiAgICAgIGxldCBjaGlsZE5vZGUgPSBOb2RlLmZyb21Kc29uKGNoaWxkKTtcbiAgICAgIG5vZGUuY2hpbGRyZW4uc2V0KGNoaWxkTm9kZS52YWx1ZSwgY2hpbGROb2RlKTtcbiAgICAgIGNoaWxkTm9kZS5wYXJlbnQgPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBmcm9tSnNvbihqc29uOiBhbnkpOiBOb2RlIHtcbiAgICBsZXQga2luZCA9IGpzb24udHlwZSB8fCAnbGVhZic7XG4gICAgbGV0IG5vZGU6IE5vZGUgPSBudWxsO1xuICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgY2FzZSAnbGVhZic6XG4gICAgICAgIG5vZGUgPSBuZXcgTGVhZihqc29uLmNvbnRlbnQsIGpzb24udGl0bGUsIGpzb24udmFsdWUsIGpzb24uYWN0aW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICduYXJ5JzpcbiAgICAgICAgbm9kZSA9IG5ldyBOYXJ5KGpzb24uY29udGVudCwganNvbi50aXRsZSwganNvbi52YWx1ZSwganNvbi5sYWJlbHMgfHwgW10pO1xuICAgICAgICBOb2RlLnBhcnNlQ2hpbGRyZW4obm9kZSwganNvbi5jaGlsZHJlbik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgbm9kZSA9IG5ldyBCaW5hcnkoanNvbi5jb250ZW50LCBqc29uLnRpdGxlLCBqc29uLnZhbHVlKTtcbiAgICAgICAgTm9kZS5wYXJzZUNoaWxkcmVuKG5vZGUsIGpzb24uY2hpbGRyZW4pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEVycm9yKCdVbmtub3duIG5vZGUgdHlwZS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBwdWJsaWMgdG9IdG1sKCk6IEhUTUxFbGVtZW50IHtcbiAgICBVdGlsLmFkZENsYXNzKHRoaXMuY2FyZC5kaXYsIHRoaXMua2luZCk7XG4gICAgLy8gQWN0dWFsIHRpdGxlIGVsZW1lbnRcbiAgICB0aGlzLmNhcmQudGl0bGUuaW5uZXJIVE1MID0gdGhpcy50aXRsZTtcbiAgICAvLyBBY3R1YWwgY29udGVudCBlbGVtZW50XG4gICAgbGV0IGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgVXRpbC5hZGRDbGFzcyhjb250ZW50LCAnQ09OVEVOVCcpO1xuICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gdGhpcy5jb250ZW50O1xuICAgIHRoaXMuY2FyZC5jb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgIHRoaXMucmFkaW9zKCk7XG4gICAgdGhpcy5idXR0b25zKCk7XG4gICAgcmV0dXJuIHRoaXMuY2FyZC5kaXY7XG4gIH1cblxuXG4gIHByb3RlY3RlZCByYWRpb3MoKSB7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5sYWJlbHMpIHtcbiAgICAgIGxldCBjb250ZW50ID0gVXRpbC5tYWtlRGl2KCdSQURJT0JVVFRPTicpO1xuICAgICAgbGV0IHJhZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgIFV0aWwuYWRkQ2xhc3MocmFkaW8sICdSQURJTycpO1xuICAgICAgbGV0IHJhZGlvSWQgPSAnZHRfaWRfJyArIGxhYmVsQ291bnRlcisrO1xuICAgICAgbGV0IGxhYmVsSWQgPSAnZHRfaWRfJyArIGxhYmVsQ291bnRlcisrO1xuICAgICAgcmFkaW8udHlwZSA9ICdyYWRpbyc7XG4gICAgICByYWRpby5pZCA9IHJhZGlvSWQ7XG4gICAgICByYWRpby5uYW1lID0gdGhpcy52YXJpYWJsZTtcbiAgICAgIHJhZGlvLnZhbHVlID0ga2V5LnRvU3RyaW5nKCk7XG4gICAgICByYWRpby5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWxsZWRieScsIGxhYmVsSWQpO1xuICAgICAgdGhpcy5yYWRpb0J1dHRvbnMucHVzaChyYWRpbyk7XG4gICAgICBsZXQgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgVXRpbC5hZGRDbGFzcyhsYWJlbCwgJ0xBQkVMJyk7XG4gICAgICBsYWJlbC5pZCA9IGxhYmVsSWQ7XG4gICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIHJhZGlvSWQpO1xuICAgICAgbGFiZWwuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICBjb250ZW50LmFwcGVuZENoaWxkKHJhZGlvKTtcbiAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgdGhpcy5jYXJkLmNvbnRlbnQuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGJ1dHRvbnMoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICBVdGlsLm1ha2VCdXR0b24oXG4gICAgICAgIHRoaXMucHJldmlvdXNOYW1lLCB0aGlzLmZpcmVQcmV2aW91cy5iaW5kKHRoaXMpLCB0aGlzLmNhcmQuYnV0dG9ucywgJ1BSRVZJT1VTJyk7XG4gICAgfVxuICAgIFV0aWwubWFrZUJ1dHRvbih0aGlzLm5leHROYW1lLCB0aGlzLmZpcmVOZXh0LmJpbmQodGhpcyksIHRoaXMuY2FyZC5idXR0b25zLCAnTkVYVCcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGZpcmVOZXh0KCkge1xuICAgIGZvciAobGV0IHJhZGlvIG9mIHRoaXMucmFkaW9CdXR0b25zKSB7XG4gICAgICBpZiAoKHJhZGlvIGFzIGFueSkuY2hlY2tlZCkge1xuICAgICAgICBsZXQgdmFsdWUgPSAocmFkaW8gYXMgYW55KS52YWx1ZTtcbiAgICAgICAgbGV0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgIHRoaXMudHJlZS5oaXN0b3J5LnB1c2gobnVtKTtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uZ2V0KG51bSkuc2hvdygpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGZpcmVQcmV2aW91cygpIHtcbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgdGhpcy5wYXJlbnQuc2hvdygpO1xuICAgIH1cbiAgfVxuXG5cbiAgLy8gVE9ETzogVGhpcyBpcyBwcm9iYWJseSBvdmVya2lsbC5cbiAgcHVibGljIHNob3coKSB7XG4gICAgdGhpcy5jYXJkLnNob3coKTtcbiAgfVxuXG4gIHB1YmxpYyBoaWRlKCkge1xuICAgIHRoaXMuY2FyZC5oaWRlKCk7XG4gIH1cblxufVxuXG5leHBvcnQgY2xhc3MgQmluYXJ5IGV4dGVuZHMgTm9kZSB7XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcHVibGljIGtpbmQgPSAnYmluYXJ5JztcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY29udGVudDogc3RyaW5nLCBwdWJsaWMgdGl0bGU6IHN0cmluZywgcHVibGljIHZhbHVlID0gMCkge1xuICAgIHN1cGVyKGNvbnRlbnQsIHRpdGxlLCB2YWx1ZSxcbiAgICAgICAgICBbe3RleHQ6ICdZZXMnLCB2YWx1ZTogMX0sIHt0ZXh0OiAnTm8nLCB2YWx1ZTogMH1dKTtcbiAgfVxuXG59XG5cblxuZXhwb3J0IGNsYXNzIE5hcnkgZXh0ZW5kcyBOb2RlIHtcbiAgcHVibGljIGtpbmQgPSAnbmFyeSdcblxufVxuXG5cbmV4cG9ydCBjbGFzcyBMZWFmIGV4dGVuZHMgTm9kZSB7XG4gIHB1YmxpYyBraW5kID0gJ2xlYWYnO1xuICBwdWJsaWMgbmV4dE5hbWUgPSAnUmVzdGFydCc7XG4gIHB1YmxpYyBzdW1tYXJ5QnV0dG9uOiBIVE1MRWxlbWVudDtcbiAgcHVibGljIGFjdGlvbkJ1dHRvbjogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoY29udGVudDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyLFxuICAgICAgICAgICAgICBwdWJsaWMgYWN0aW9uOiBzdHJpbmcgPSAnJykge1xuICAgIHN1cGVyKGNvbnRlbnQsIHRpdGxlLCB2YWx1ZSk7XG4gIH1cblxuXG4gIHByb3RlY3RlZCBidXR0b25zKCkge1xuICAgIHN1cGVyLmJ1dHRvbnMoKTtcbiAgICB0aGlzLnN1bW1hcnlCdXR0b24gPSBVdGlsLm1ha2VCdXR0b24oXG4gICAgICAnU3VtbWFyeScsIHRoaXMuZmlyZVN1bW1hcnkuYmluZCh0aGlzKSwgdGhpcy5jYXJkLmJ1dHRvbnMpO1xuICAgIGlmICh0aGlzLmFjdGlvbikge1xuICAgICAgdGhpcy5hY3Rpb25CdXR0b24gPSBVdGlsLm1ha2VCdXR0b24oXG4gICAgICAgICdHbycsIHRoaXMuZmlyZUFjdGlvbi5iaW5kKHRoaXMpLCB0aGlzLmNhcmQuYnV0dG9ucywgJ0FDVElPTicpO1xuICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGZpcmVBY3Rpb24oKSB7XG4gICAgd2luZG93Lm9wZW4odGhpcy5hY3Rpb24sICdfYmxhbmsnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJlU3VtbWFyeSgpIHtcbiAgICB0aGlzLnRyZWUuc3VtbWFyeSh0aGlzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaXJlTmV4dCgpIHtcbiAgICB0aGlzLmhpZGUoKTtcbiAgICB0aGlzLnRyZWUucm9vdC5zaG93KCk7XG4gICAgdGhpcy50cmVlLmhpc3RvcnkgPSBbXTtcbiAgfVxuXG59XG5cblxuZXhwb3J0IGNsYXNzIFN1bW1hcnkgZXh0ZW5kcyBOb2RlIHtcblxuICBwdWJsaWMga2luZCA9ICdzdW1tYXJ5JztcbiAgcHVibGljIG5leHROYW1lID0gJ1Jlc3RhcnQnO1xuICBwdWJsaWMgc3VtbWFyeUVsZW1lbnQgPSBVdGlsLm1ha2VEaXYoJ1NVTU1BUlknKTtcbiAgXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCcnLCAnU3VtbWFyeScpO1xuICAgIHRoaXMuY2FyZC5jb250ZW50LmFwcGVuZENoaWxkKHRoaXMuc3VtbWFyeUVsZW1lbnQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGZpcmVOZXh0KCkge1xuICAgIHRoaXMuaGlkZSgpO1xuICAgIHRoaXMudHJlZS5yb290LnNob3coKTtcbiAgICB0aGlzLnRyZWUuaGlzdG9yeSA9IFtdO1xuICB9XG5cbiAgcHVibGljIHNob3coKSB7XG4gICAgc3VwZXIuc2hvdygpO1xuICAgIHRoaXMuY29tcGlsZVN1bW1hcnkoKTtcbiAgfVxuXG4gIHByaXZhdGUgY29tcGlsZVN1bW1hcnkoKSB7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBsZXQgaGwgPSB0aGlzLnRyZWUuaGlzdG9yeS5sZW5ndGg7XG4gICAgbGV0IG5vZGUgPSB0aGlzLnBhcmVudDtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgdGhpcy5zdW1tYXJ5RWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICBkbyB7XG4gICAgICBsZXQgYW5zd2VyID0gY291bnQgPyBub2RlLmxhYmVscy5nZXQodGhpcy50cmVlLmhpc3RvcnlbaGwgLSBjb3VudF0pIDogJyc7XG4gICAgICByZXN1bHQudW5zaGlmdCh0aGlzLm1ha2VTdW1tYXJ5TGluZShub2RlLmNvbnRlbnQsIGFuc3dlcikpO1xuICAgICAgbm9kZSA9IG5vZGUucGFyZW50O1xuICAgICAgY291bnQrKztcbiAgICB9IHdoaWxlIChub2RlKTtcbiAgICByZXN1bHQuZm9yRWFjaCh4ID0+IHRoaXMuc3VtbWFyeUVsZW1lbnQuYXBwZW5kQ2hpbGQoeCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBtYWtlU3VtbWFyeUxpbmUocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgbGV0IGRpdiA9IFV0aWwubWFrZURpdignU1VNTUFSWUxJTkUnKTtcbiAgICBVdGlsLm1ha2VTcGFuKGRpdiwgcXVlc3Rpb24sICdRVUVTVElPTicpO1xuICAgIFV0aWwubWFrZVNwYW4oZGl2LCBhbnN3ZXIsICdBTlNXRVInKTtcbiAgICByZXR1cm4gZGl2O1xuICB9XG5cbn1cblxuZXhwb3J0IGNsYXNzIENhcmQge1xuXG4gIHB1YmxpYyBkaXY6IEhUTUxFbGVtZW50ID0gVXRpbC5tYWtlRGl2KCdOT0RFJyk7XG4gIHB1YmxpYyB0aXRsZTogSFRNTEVsZW1lbnQgPSBVdGlsLm1ha2VIMSgnVElUTEUnKTtcbiAgcHVibGljIGNvbnRlbnQ6IEhUTUxFbGVtZW50ID0gVXRpbC5tYWtlRGl2KCdDT05URU5UJylcbiAgcHVibGljIGJ1dHRvbnM6IEhUTUxFbGVtZW50ID0gVXRpbC5tYWtlRGl2KCdCVVRUT05TJyk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy50aXRsZSk7XG4gICAgdGhpcy50aXRsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgdGhpcy5kaXYuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50KTtcbiAgICB0aGlzLmNvbnRlbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuYnV0dG9ucyk7XG4gIH1cblxuICBwdWJsaWMgc2hvdygpIHtcbiAgICB0aGlzLmRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLmNvbnRlbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgdGhpcy50aXRsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdwb2xpdGUnKTtcbiAgICB0aGlzLnRpdGxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICB9XG5cbiAgcHVibGljIGhpZGUoKSB7XG4gICAgdGhpcy5kaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLmNvbnRlbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgIHRoaXMudGl0bGUucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxpdmUnKTtcbiAgICB0aGlzLnRpdGxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgfVxuXG59XG4iLCJuYW1lc3BhY2UgVXRpbCB7XG5cbiAgZXhwb3J0IGNvbnN0IG1ha2VCdXR0b24gPSBmdW5jdGlvbihcbiAgICBuYW1lOiBzdHJpbmcsIGFjdGlvbjogKCkgPT4gYW55LCBwYXJlbnQ6IEhUTUxFbGVtZW50LFxuICAgIGNsYXNzbmFtZTogc3RyaW5nID0gJycpOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBuYW1lO1xuICAgIGFkZENsYXNzKGJ1dHRvbiwgY2xhc3NuYW1lIHx8IG5hbWUudG9VcHBlckNhc2UoKSwgJ0JVVFRPTicpO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFjdGlvbik7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgcmV0dXJuIGJ1dHRvbjtcbiAgfTtcblxuICBsZXQgcHJlZml4ID0gJ0RUXyc7XG5cbiAgZXhwb3J0IGNvbnN0IGFkZENsYXNzID0gZnVuY3Rpb24oZWxlbWVudDogSFRNTEVsZW1lbnQsIC4uLnJlc3Q6IHN0cmluZ1tdKSB7XG4gICAgcmVzdC5mb3JFYWNoKHggPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKHByZWZpeCArIHgudG9VcHBlckNhc2UoKSkpO1xuICB9O1xuXG4gIGV4cG9ydCBjb25zdCBtYWtlRGl2ID0gZnVuY3Rpb24oLi4uY2xhc3NuYW1lOiBzdHJpbmdbXSkge1xuICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhZGRDbGFzcyhkaXYsIC4uLmNsYXNzbmFtZSk7XG4gICAgcmV0dXJuIGRpdjtcbiAgfTtcblxuICBleHBvcnQgY29uc3QgbWFrZUgxID0gZnVuY3Rpb24oLi4uY2xhc3NuYW1lOiBzdHJpbmdbXSkge1xuICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xuICAgIGFkZENsYXNzKGRpdiwgLi4uY2xhc3NuYW1lKTtcbiAgICByZXR1cm4gZGl2O1xuICB9O1xuXG4gIGV4cG9ydCBjb25zdCBtYWtlU3BhbiA9IGZ1bmN0aW9uKFxuICAgIHBhcmVudDogSFRNTEVsZW1lbnQsIGNvbnRlbnQ6IHN0cmluZywgLi4uY2xhc3NuYW1lOiBzdHJpbmdbXSkge1xuICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGFkZENsYXNzKHNwYW4sIC4uLmNsYXNzbmFtZSk7XG4gICAgc3Bhbi5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgfTtcblxufVxuXG5leHBvcnQgZGVmYXVsdCBVdGlsO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==