!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.decisiontree=e():t.decisiontree=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./ts/index.ts")}({"./ts/index.ts":
/*!*********************!*\
  !*** ./ts/index.ts ***!
  \*********************/
/*! no static exports found */function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.Tree=void 0;var r=n(/*! ./tree */"./ts/tree.ts");e.Tree=r.Tree,e.create=e.Tree.create},"./ts/tree.ts":
/*!********************!*\
  !*** ./ts/tree.ts ***!
  \********************/
/*! no static exports found */function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.Card=e.Summary=e.Leaf=e.Nary=e.Binary=e.Node=e.DepthFirst=e.Tree=void 0;var s=n(/*! ./util */"./ts/util.ts"),u=function(){function t(){this.jsonStr="",this.root=null,this.history=[],this.summaryElement=new p}return t.create=function(e,n,r){var i=new t;i.loadJson(e).then((function(t){r&&(r.innerHTML=t,r.style.display="hide"),i.toHTML(n)})).catch((function(t){if(!r)throw r;r.innerHTML=t,r.style.display="block",r.style.visibility="visible"}))},t.prototype.loadJson=function(t){var e=this;return new Promise((function(n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?this._loadJson(i.responseText,n,r):r(i.statusText))}.bind(e),i.onerror=function(){r(i.statusText)}.bind(e),i.open("GET",t,!0),i.send()}))},t.prototype._loadJson=function(t,e,n){try{this.jsonStr=t,this.fromJson(),e("JSON loaded")}catch(t){n("JSON Parser Error!")}},t.prototype.fromJson=function(){var t=this;this.root=d.fromJson(JSON.parse(this.jsonStr)),new l(this,(function(t){return t})).result.forEach((function(e){return e.tree=t})),this.summaryElement.parent=this.root,this.summaryElement.tree=this},t.prototype.toHTML=function(t){this.rootElement=t,new l(this,(function(t){return t})).result.forEach((function(e){t.appendChild(e.toHtml()),e.hide()})),t.appendChild(this.summaryElement.toHtml()),this.summaryElement.hide(),this.root.show()},t.prototype.summary=function(t){t.hide(),this.summaryElement.parent=t,this.summaryElement.show()},t}();e.Tree=u;var l=function(){function t(t,e){this.func=e,this.result=[],this.visit(t.root)}return t.prototype.visit=function(t){var e=this;this.result.push(this.func(t)),t.children.forEach((function(t){return e.visit(t)}))},t}();e.DepthFirst=l;var d=function(){function t(e,n,r,i){var a,s;void 0===n&&(n=""),void 0===r&&(r=0),void 0===i&&(i=[]),this.content=e,this.title=n,this.value=r,this.kind="",this.nextName="Next",this.previousName="Back",this.labels=new Map,this.children=new Map,this.parent=null,this.variable="dt_variable_"+t.counter++,this.radioButtons=[],this.card=new y;try{for(var u=o(i),l=u.next();!l.done;l=u.next()){var d=l.value,h=d.text,c=d.value;this.labels.set(c,h)}}catch(t){a={error:t}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}}return t.parseChildren=function(e,n){var r,i;if(n&&n.length)try{for(var a=o(n),s=a.next();!s.done;s=a.next()){var u=s.value,l=t.fromJson(u);e.children.set(l.value,l),l.parent=e}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t.fromJson=function(e){var n=null;switch(e.type||"leaf"){case"leaf":n=new f(e.content,e.title,e.value,e.action);break;case"nary":n=new c(e.content,e.title,e.value,e.labels||[]),t.parseChildren(n,e.children);break;case"binary":n=new h(e.content,e.title,e.value),t.parseChildren(n,e.children);break;default:throw Error("Unknown node type.")}return n},t.prototype.toHtml=function(){s.default.addClass(this.card.div,this.kind),this.card.title.innerHTML=this.title;var t=document.createElement("span");return s.default.addClass(t,"CONTENT"),t.innerHTML=this.content,this.card.content.appendChild(t),this.radios(),this.buttons(),this.card.div},t.prototype.radios=function(){var e,n;try{for(var r=o(this.labels),i=r.next();!i.done;i=r.next()){var u=a(i.value,2),l=u[0],d=u[1],h=s.default.makeNode("div","RADIOBUTTON"),c=document.createElement("input");s.default.addClass(c,"RADIO");var f="dt_id_"+t.labelCounter++,p="dt_id_"+t.labelCounter++;c.type="radio",c.id=f,c.name=this.variable,c.value=l.toString(),this.radioButtons.push(c);var y=document.createElement("label");s.default.addClass(y,"LABEL"),y.id=p,y.setAttribute("for",f),y.innerHTML=d,h.appendChild(c),h.appendChild(y),this.card.content.appendChild(h)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.buttons=function(){this.parent&&s.default.makeButton(this.previousName,this.firePrevious.bind(this),this.card.buttons,"PREVIOUS"),s.default.makeButton(this.nextName,this.fireNext.bind(this),this.card.buttons,"NEXT")},t.prototype.fireNext=function(){var t,e;try{for(var n=o(this.radioButtons),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.checked){var a=i.value,s=parseInt(a,10);return this.tree.history.push(s),this.hide(),void this.children.get(s).show()}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.firePrevious=function(){this.parent&&(this.hide(),this.parent.show())},t.prototype.show=function(){this.card.show()},t.prototype.hide=function(){this.card.hide()},t.counter=0,t.labelCounter=0,t}();e.Node=d;var h=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e,n,r,[{text:"Yes",value:1},{text:"No",value:0}])||this;return i.content=e,i.title=n,i.value=r,i.kind="binary",i}return i(e,t),e}(d);e.Binary=h;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.kind="nary",e}return i(e,t),e}(d);e.Nary=c;var f=function(t){function e(e,n,r,i){void 0===i&&(i="");var o=t.call(this,e,n,r)||this;return o.action=i,o.kind="leaf",o.nextName="Restart",o}return i(e,t),e.prototype.buttons=function(){t.prototype.buttons.call(this),this.summaryButton=s.default.makeButton("Summary",this.fireSummary.bind(this),this.card.buttons),this.action&&(this.actionButton=s.default.makeButton("Go",this.fireAction.bind(this),this.card.buttons,"ACTION"),document.createElement("button"))},e.prototype.fireAction=function(){window.open(this.action,"_blank")},e.prototype.fireSummary=function(){this.tree.summary(this)},e.prototype.fireNext=function(){this.hide(),this.tree.root.show(),this.tree.history=[]},e}(d);e.Leaf=f;var p=function(t){function e(){var e=t.call(this,"","Summary")||this;return e.kind="summary",e.nextName="Restart",e.summaryElement=s.default.makeNode("div","SUMMARY"),e.card.content.appendChild(e.summaryElement),e}return i(e,t),e.prototype.fireNext=function(){this.hide(),this.tree.root.show(),this.tree.history=[]},e.prototype.show=function(){t.prototype.show.call(this),this.compileSummary()},e.prototype.compileSummary=function(){var t=this,e=0,n=this.tree.history.length,r=this.parent,i=[];this.summaryElement.innerHTML="";do{var o=e?r.labels.get(this.tree.history[n-e]):"";i.unshift(this.makeSummaryLine(r.content,o)),r=r.parent,e++}while(r);i.forEach((function(e){return t.summaryElement.appendChild(e)}))},e.prototype.makeSummaryLine=function(t,e){var n=s.default.makeNode("div","SUMMARYLINE");return s.default.makeSpan(n,t,"QUESTION"),s.default.makeSpan(n,e,"ANSWER"),n},e}(d);e.Summary=p;var y=function(){function t(){this.div=s.default.makeNode("div","NODE"),this.title=s.default.makeNode("h1","TITLE"),this.content=s.default.makeNode("div","CONTENT"),this.buttons=s.default.makeNode("div","BUTTONS"),this.div.appendChild(this.title),this.title.setAttribute("tabindex","-1"),this.div.appendChild(this.content),this.content.setAttribute("tabindex","-1"),this.div.appendChild(this.buttons)}return t.prototype.show=function(){this.div.style.display="block",this.title.setAttribute("aria-live","polite"),this.content.setAttribute("tabindex","0"),this.title.setAttribute("tabindex","0"),this.title.focus()},t.prototype.hide=function(){this.div.style.display="none",this.title.removeAttribute("aria-live"),this.title.setAttribute("tabindex","-1"),this.content.setAttribute("tabindex","-1")},t}();e.Card=y},"./ts/util.ts":
/*!********************!*\
  !*** ./ts/util.ts ***!
  \********************/
/*! no static exports found */function(t,e,n){"use strict";var r,i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.addClass=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e.forEach((function(e){return t.classList.add("DT_"+e.toUpperCase())}))},t.makeButton=function(e,n,r,i){void 0===i&&(i="");var o=document.createElement("button");return o.innerHTML=e,t.addClass(o,i||e.toUpperCase(),"BUTTON"),o.addEventListener("click",n),r.appendChild(o),o},t.makeNode=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=document.createElement(e);return t.addClass.apply(void 0,o([i],n)),i},t.makeSpan=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=document.createElement("span");t.addClass.apply(void 0,o([a],r)),a.innerHTML=n,e.appendChild(a)}}(r||(r={})),e.default=r}})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZWNpc2lvbnRyZWUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2RlY2lzaW9udHJlZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9kZWNpc2lvbnRyZWUvLi90cy9pbmRleC50cyIsIndlYnBhY2s6Ly9kZWNpc2lvbnRyZWUvLi90cy90cmVlLnRzIiwid2VicGFjazovL2RlY2lzaW9udHJlZS8uL3RzL3V0aWwudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJUcmVlIiwianNvblN0ciIsImhpc3RvcnkiLCJzdW1tYXJ5RWxlbWVudCIsIlN1bW1hcnkiLCJ1cmwiLCJyZXN1bHQiLCJlcnJvciIsInRyZWUiLCJsb2FkSnNvbiIsInRoZW4iLCJpbm5lckhUTUwiLCJzdHlsZSIsImRpc3BsYXkiLCJ0b0hUTUwiLCJjYXRjaCIsInZpc2liaWxpdHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImh0dHBSZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiX2xvYWRKc29uIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJvcGVuIiwic2VuZCIsImpzb24iLCJmcm9tSnNvbiIsImVyciIsIk5vZGUiLCJKU09OIiwicGFyc2UiLCJEZXB0aEZpcnN0IiwieCIsImZvckVhY2giLCJwYXJlbnQiLCJub2RlIiwicm9vdEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInRvSHRtbCIsImhpZGUiLCJzaG93Iiwic3VtbWFyeSIsImZ1bmMiLCJ2aXNpdCIsInB1c2giLCJjaGlsZHJlbiIsImNvbnRlbnQiLCJ0aXRsZSIsImxhYmVscyIsImtpbmQiLCJuZXh0TmFtZSIsInByZXZpb3VzTmFtZSIsIk1hcCIsInZhcmlhYmxlIiwiY291bnRlciIsInJhZGlvQnV0dG9ucyIsImNhcmQiLCJDYXJkIiwidGV4dCIsInNldCIsInBhcnNlQ2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZCIsImNoaWxkTm9kZSIsInR5cGUiLCJMZWFmIiwiYWN0aW9uIiwiTmFyeSIsIkJpbmFyeSIsIkVycm9yIiwiYWRkQ2xhc3MiLCJkaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJyYWRpb3MiLCJidXR0b25zIiwibWFrZU5vZGUiLCJyYWRpbyIsInJhZGlvSWQiLCJsYWJlbENvdW50ZXIiLCJsYWJlbElkIiwiaWQiLCJ0b1N0cmluZyIsImxhYmVsIiwic2V0QXR0cmlidXRlIiwibWFrZUJ1dHRvbiIsImZpcmVQcmV2aW91cyIsImZpcmVOZXh0IiwiY2hlY2tlZCIsIm51bSIsInBhcnNlSW50Iiwic3VtbWFyeUJ1dHRvbiIsImZpcmVTdW1tYXJ5IiwiYWN0aW9uQnV0dG9uIiwiZmlyZUFjdGlvbiIsIndpbmRvdyIsImNvbXBpbGVTdW1tYXJ5IiwiY291bnQiLCJobCIsImFuc3dlciIsInVuc2hpZnQiLCJtYWtlU3VtbWFyeUxpbmUiLCJxdWVzdGlvbiIsIm1ha2VTcGFuIiwiZm9jdXMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJVdGlsIiwiZWxlbWVudCIsInJlc3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0b1VwcGVyQ2Fz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ekIsTUFRc0M5RSxFQUFFK0UsbUJBV3hDLEVBQUExQixXQUFhLFNBQ3hCcEgsRUFBY2lHLEVBQW1CaEMsRUFDakM4RSxRQUFBLElBQUFBLE1BQUEsSUFDQSxJQUFJQyxFQUFTekMsU0FBU0MsY0FBYyxVQUtwQyxPQUpBd0MsRUFBTzVHLFVBQVlwQyxFQUNuQixFQUFBcUcsU0FBUzJDLEVBQVFELEdBQWEvSSxFQUFLOEksY0FBZSxVQUNsREUsRUFBT0MsaUJBQWlCLFFBQVNoRCxHQUNqQ2hDLEVBQU9HLFlBQVk0RSxHQUNaQSxHQVNJLEVBQUFyQyxTQUFXLFNBQ3RCdUMsRyxJQUFhLHdEQUNiLElBQUloRixFQUFPcUMsU0FBU0MsY0FBYzBDLEdBRWxDLE9BREEsRUFBQTdDLFNBQVEsZ0JBQUNuQyxHQUFTNkUsSUFDWDdFLEdBU0ksRUFBQW9FLFNBQVcsU0FDdEJyRSxFQUFxQlksRyxJQUFpQix3REFDdEMsSUFBSXNFLEVBQU81QyxTQUFTQyxjQUFjLFFBQ2xDLEVBQUFILFNBQVEsZ0JBQUM4QyxHQUFTSixJQUNsQkksRUFBSy9HLFVBQVl5QyxFQUNqQlosRUFBT0csWUFBWStFLElBM0R2QixDQUFVVixNQUFJLEtBZ0VkLFVBQWVBIiwiZmlsZSI6ImRlY2lzaW9udHJlZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImRlY2lzaW9udHJlZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJkZWNpc2lvbnRyZWVcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3RzL2luZGV4LnRzXCIpO1xuIiwiaW1wb3J0IHtUcmVlIGFzIG9iajB9IGZyb20gJy4vdHJlZSc7XG5cbmV4cG9ydCBsZXQgVHJlZSA9IG9iajA7XG5leHBvcnQgbGV0IGNyZWF0ZSA9IFRyZWUuY3JlYXRlO1xuIiwiLy8gICAgICAgICAgICAgICAgICAgIEdOVSBHRU5FUkFMIFBVQkxJQyBMSUNFTlNFXG4vLyAgICAgICAgICAgICAgICAgICAgICAgVmVyc2lvbiAzLCAyOSBKdW5lIDIwMDdcbi8vXG4vLyAgKGMpIDIwMjAgVm9sa2VyIFNvcmdlLCB2LnNvcmdlQHByb2dyZXNzaXZlYWNjZXNzLmNvbVxuLy8gICAgICAgICAgIEJlbmV0ZWNoICYgRVRTIGhhY2thdGhvblxuLy9cblxuaW1wb3J0IFV0aWwgZnJvbSAnLi91dGlsJztcblxuXG4vKipcbiAqIEJhc2ljIHRyZWUgY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIFRyZWUge1xuXG4gIHB1YmxpYyBqc29uU3RyOiBzdHJpbmcgPSAnJztcbiAgcHVibGljIHJvb3Q6IE5vZGUgPSBudWxsO1xuICBwdWJsaWMgaGlzdG9yeTogbnVtYmVyW10gPSBbXTtcbiAgcHVibGljIHJvb3RFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgcHVibGljIHN1bW1hcnlFbGVtZW50OiBTdW1tYXJ5ID0gbmV3IFN1bW1hcnkoKTtcblxuXG4gIC8qKlxuICAgKiBDcmVhdG9yIHBhdHRlcm4gZm9yIHRoZSB0cmVlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBkYXRhIFVSTCBmb3IgbG9hZGluZyBKU09OLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSByZXN1bHQgVGhlIG5vZGUgdG8gYXR0YWNoIHRoZSB0cmVlIHRvLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50PX0gZXJyb3IgVGhlIG5vZGUgdG8gYXR0YWNoIGVycm9yIG91dHB1dC4gTy93IGVycm9ycyBhcmVcbiAgICogICAgIHRocm93bi5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHVybDogc3RyaW5nLCByZXN1bHQ6IEhUTUxFbGVtZW50LCBlcnJvcj86IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IHRyZWUgPSBuZXcgVHJlZSgpO1xuICAgIGxldCBwcm9taXNlID0gdHJlZS5sb2FkSnNvbih1cmwpO1xuICAgIHByb21pc2UudGhlbigocCkgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGVycm9yLmlubmVySFRNTCA9IHA7XG4gICAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSAnaGlkZSc7XG4gICAgICB9XG4gICAgICB0cmVlLnRvSFRNTChyZXN1bHQpO1xuICAgIH0pLmNhdGNoKChwKSA9PiB7XG4gICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgZXJyb3IuaW5uZXJIVE1MID0gcDtcbiAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgZXJyb3Iuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIExvYWRzIEpzb24gZGF0YSBmcm9tIGEgVVJMLlxuICAgKiBAcmV0dXJuIFByb21pc2VcbiAgICovXG4gIHB1YmxpYyBsb2FkSnNvbih1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBodHRwUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgaHR0cFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChodHRwUmVxdWVzdC5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgaWYgKGh0dHBSZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkSnNvbihodHRwUmVxdWVzdC5yZXNwb25zZVRleHQsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChodHRwUmVxdWVzdC5zdGF0dXNUZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgIGh0dHBSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGh0dHBSZXF1ZXN0LnN0YXR1c1RleHQpO1xuICAgICAgfS5iaW5kKHRoaXMpO1xuICAgICAgaHR0cFJlcXVlc3Qub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgIGh0dHBSZXF1ZXN0LnNlbmQoKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGxvYWRlZCBqc29uIGFuZCBwYXJzZXMgaXQgaW50byB0aGUgVHJlZSBzdHJ1Y3R1cmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIFRoZSBKU09OIHN0cmluZy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBQcm9taXNlIHJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBQcm9taXNlIHJlamVjdGlvbi5cbiAgICovXG4gIHByb3RlY3RlZCBfbG9hZEpzb24oanNvbjogc3RyaW5nLCByZXNvbHZlOiBGdW5jdGlvbiwgcmVqZWN0OiBGdW5jdGlvbikge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmpzb25TdHIgPSBqc29uO1xuICAgICAgdGhpcy5mcm9tSnNvbigpO1xuICAgICAgcmVzb2x2ZSgnSlNPTiBsb2FkZWQnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlamVjdCgnSlNPTiBQYXJzZXIgRXJyb3IhJyk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBKU09OLlxuICAgKi9cbiAgcHVibGljIGZyb21Kc29uKCkge1xuICAgIHRoaXMucm9vdCA9IE5vZGUuZnJvbUpzb24oSlNPTi5wYXJzZSh0aGlzLmpzb25TdHIpKTtcbiAgICBsZXQgZGZzID0gbmV3IERlcHRoRmlyc3QodGhpcywgKHg6IE5vZGUpID0+IHgpO1xuICAgIGRmcy5yZXN1bHQuZm9yRWFjaChuID0+IG4udHJlZSA9IHRoaXMpO1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQucGFyZW50ID0gdGhpcy5yb290O1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQudHJlZSA9IHRoaXM7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyB0aGUgdHJlZSBET00gdG8gYW4gZXhpc3Rpbmcgbm9kZS5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZSBUaGUgRE9NIG5vZGUuXG4gICAqL1xuICBwdWJsaWMgdG9IVE1MKG5vZGU6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5yb290RWxlbWVudCA9IG5vZGU7XG4gICAgbGV0IGRmcyA9IG5ldyBEZXB0aEZpcnN0KHRoaXMsICh4OiBOb2RlKSA9PiB4KTtcbiAgICBkZnMucmVzdWx0LmZvckVhY2goKG46IE5vZGUpID0+IHtcbiAgICAgIG5vZGUuYXBwZW5kQ2hpbGQobi50b0h0bWwoKSk7XG4gICAgICBuLmhpZGUoKTtcbiAgICB9KTtcbiAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMuc3VtbWFyeUVsZW1lbnQudG9IdG1sKCkpO1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQuaGlkZSgpO1xuICAgIHRoaXMucm9vdC5zaG93KCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHN1bW1hcnkgb2YgdGhlIGRlY2lzaW9uIHBhdGguXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbGVhZiBub2RlLlxuICAgKi9cbiAgcHVibGljIHN1bW1hcnkobm9kZTogTm9kZSkge1xuICAgIG5vZGUuaGlkZSgpO1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQucGFyZW50ID0gbm9kZTtcbiAgICB0aGlzLnN1bW1hcnlFbGVtZW50LnNob3coKTtcbiAgfVxuXG59XG5cblxuLyoqXG4gKiBBIERlcHRoIEZpcnN0IFZpc2l0b3IgZm9yIHRoZSBUcmVlLlxuICovXG5leHBvcnQgY2xhc3MgRGVwdGhGaXJzdCB7XG5cbiAgLyoqXG4gICAqIFRoZSByZXN1bHRzIGZyb20gdGhlIHNlYXJjaC5cbiAgICovXG4gIHB1YmxpYyByZXN1bHQ6IGFueVtdID0gW107XG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge1RyZWV9IHRyZWUgVGhlIHRyZWUgdG8gdmlzaXQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIHZpc2l0aW5nIG1ldGhvZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHRyZWU6IFRyZWUsIHByaXZhdGUgZnVuYzogRnVuY3Rpb24pIHtcbiAgICB0aGlzLnZpc2l0KHRyZWUucm9vdCk7XG4gIH1cblxuICAvKipcbiAgICogREYgd2Fsa2luZyBvZiB0aGUgdHJlZS5cbiAgICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBjdXJyZW50IG5vZGUuXG4gICAqL1xuICBwcml2YXRlIHZpc2l0KG5vZGU6IE5vZGUpIHtcbiAgICB0aGlzLnJlc3VsdC5wdXNoKHRoaXMuZnVuYyhub2RlKSk7XG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKHggPT4gdGhpcy52aXNpdCh4KSk7XG4gIH1cblxufVxuXG5cbi8qKlxuICogQWJzdHJhY3Qgbm9kZSBjbGFzc1xuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTm9kZSB7XG5cbiAgLyoqXG4gICAqIENvdW50ZXIgZm9yIHZhcmlhYmxlcy4uXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIGNvdW50ZXIgPSAwO1xuXG4gIC8qKlxuICAgKiBDb3VudGVyIGZvciBpZHMuXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIGxhYmVsQ291bnRlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIG5vZGUuXG4gICAqL1xuICBwdWJsaWMga2luZDogc3RyaW5nID0gJyc7XG5cbiAgLyoqXG4gICAqIFRoZSB0cmVlIGl0IGlzIGF0dGFjaGVkIHRvLlxuICAgKi9cbiAgcHVibGljIHRyZWU6IFRyZWU7XG5cbiAgLyoqXG4gICAqIE5hbWUgZm9yIHRoZSBuZXh0IGJ1dHRvbi5cbiAgICovXG4gIHB1YmxpYyBuZXh0TmFtZTogc3RyaW5nID0gJ05leHQnO1xuXG4gIC8qKlxuICAgKiBOYW1lIGZvciB0aGUgYmFjayBidXR0b24uXG4gICAqL1xuICBwdWJsaWMgcHJldmlvdXNOYW1lOiBzdHJpbmcgPSAnQmFjayc7XG5cbiAgcHVibGljIGxhYmVsczogTWFwPG51bWJlciwgc3RyaW5nPiA9IG5ldyBNYXA8bnVtYmVyLCBzdHJpbmc+KCk7XG4gIHB1YmxpYyBjaGlsZHJlbjogTWFwPG51bWJlciwgTm9kZT4gPSBuZXcgTWFwPG51bWJlciwgTm9kZT4oKTtcbiAgcHVibGljIHBhcmVudDogTm9kZSA9IG51bGw7XG4gIHB1YmxpYyB2YXJpYWJsZTogc3RyaW5nID0gJ2R0X3ZhcmlhYmxlXycgKyBOb2RlLmNvdW50ZXIrKztcbiAgcHVibGljIGNhcmQ6IENhcmQ7XG4gIHB1YmxpYyByYWRpb0J1dHRvbnM6IEhUTUxFbGVtZW50W10gPSBbXTtcblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7VHJlZX0gdHJlZSBUaGUgdHJlZSB0byB2aXNpdC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgdmlzaXRpbmcgbWV0aG9kLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHVibGljIGNvbnRlbnQ6IHN0cmluZywgcHVibGljIHRpdGxlOiBzdHJpbmcgPSAnJyxcbiAgICAgICAgICAgICAgcHVibGljIHZhbHVlID0gMCxcbiAgICAgICAgICAgICAgbGFiZWxzOiB7dGV4dDogc3RyaW5nLCB2YWx1ZTogbnVtYmVyfVtdID0gW10pIHtcbiAgICB0aGlzLmNhcmQgPSBuZXcgQ2FyZCgpO1xuICAgIGZvciAobGV0IHt0ZXh0OiB0ZXh0LCB2YWx1ZTogdmFsdWV9IG9mIGxhYmVscykge1xuICAgICAgdGhpcy5sYWJlbHMuc2V0KHZhbHVlLCB0ZXh0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBwYXJzZUNoaWxkcmVuKG5vZGU6IE5vZGUsIGpzb246IGFueVtdKSB7XG4gICAgaWYgKCFqc29uIHx8ICFqc29uLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGpzb24pIHtcbiAgICAgIGxldCBjaGlsZE5vZGUgPSBOb2RlLmZyb21Kc29uKGNoaWxkKTtcbiAgICAgIG5vZGUuY2hpbGRyZW4uc2V0KGNoaWxkTm9kZS52YWx1ZSwgY2hpbGROb2RlKTtcbiAgICAgIGNoaWxkTm9kZS5wYXJlbnQgPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIEpTT04gZm9ybWF0IG9mIGEgbm9kZS5cbiAgICogQHBhcmFtIHtKU09OfSBqb3NuIFRoZSBpbnB1dCBKU09OLlxuICAgKiBAcmV0dXJuIHtOb2RlfSBUaGUgbmV3bHkgcGFyc2VkIG5vZGUuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGZyb21Kc29uKGpzb246IGFueSk6IE5vZGUge1xuICAgIGxldCBraW5kID0ganNvbi50eXBlIHx8ICdsZWFmJztcbiAgICBsZXQgbm9kZTogTm9kZSA9IG51bGw7XG4gICAgc3dpdGNoIChraW5kKSB7XG4gICAgICBjYXNlICdsZWFmJzpcbiAgICAgICAgbm9kZSA9IG5ldyBMZWFmKGpzb24uY29udGVudCwganNvbi50aXRsZSwganNvbi52YWx1ZSwganNvbi5hY3Rpb24pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ25hcnknOlxuICAgICAgICBub2RlID0gbmV3IE5hcnkoanNvbi5jb250ZW50LCBqc29uLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAganNvbi52YWx1ZSwganNvbi5sYWJlbHMgfHwgW10pO1xuICAgICAgICBOb2RlLnBhcnNlQ2hpbGRyZW4obm9kZSwganNvbi5jaGlsZHJlbik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgbm9kZSA9IG5ldyBCaW5hcnkoanNvbi5jb250ZW50LCBqc29uLnRpdGxlLCBqc29uLnZhbHVlKTtcbiAgICAgICAgTm9kZS5wYXJzZUNoaWxkcmVuKG5vZGUsIGpzb24uY2hpbGRyZW4pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEVycm9yKCdVbmtub3duIG5vZGUgdHlwZS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSBIVE1MIGVsZW1lbnQgb2YgdGhhdCBub2RlLlxuICAgKi9cbiAgcHVibGljIHRvSHRtbCgpOiBIVE1MRWxlbWVudCB7XG4gICAgVXRpbC5hZGRDbGFzcyh0aGlzLmNhcmQuZGl2LCB0aGlzLmtpbmQpO1xuICAgIC8vIEFjdHVhbCB0aXRsZSBlbGVtZW50XG4gICAgdGhpcy5jYXJkLnRpdGxlLmlubmVySFRNTCA9IHRoaXMudGl0bGU7XG4gICAgLy8gQWN0dWFsIGNvbnRlbnQgZWxlbWVudFxuICAgIGxldCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIFV0aWwuYWRkQ2xhc3MoY29udGVudCwgJ0NPTlRFTlQnKTtcbiAgICBjb250ZW50LmlubmVySFRNTCA9IHRoaXMuY29udGVudDtcbiAgICB0aGlzLmNhcmQuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICB0aGlzLnJhZGlvcygpO1xuICAgIHRoaXMuYnV0dG9ucygpO1xuICAgIHJldHVybiB0aGlzLmNhcmQuZGl2O1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcmFkaW8gYnV0dG9ucyB0byB0aGUgY2FyZC5cbiAgICovXG4gIHByb3RlY3RlZCByYWRpb3MoKSB7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5sYWJlbHMpIHtcbiAgICAgIGxldCBjb250ZW50ID0gVXRpbC5tYWtlTm9kZSgnZGl2JywgJ1JBRElPQlVUVE9OJyk7XG4gICAgICBsZXQgcmFkaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgVXRpbC5hZGRDbGFzcyhyYWRpbywgJ1JBRElPJyk7XG4gICAgICBsZXQgcmFkaW9JZCA9ICdkdF9pZF8nICsgTm9kZS5sYWJlbENvdW50ZXIrKztcbiAgICAgIGxldCBsYWJlbElkID0gJ2R0X2lkXycgKyBOb2RlLmxhYmVsQ291bnRlcisrO1xuICAgICAgcmFkaW8udHlwZSA9ICdyYWRpbyc7XG4gICAgICByYWRpby5pZCA9IHJhZGlvSWQ7XG4gICAgICByYWRpby5uYW1lID0gdGhpcy52YXJpYWJsZTtcbiAgICAgIHJhZGlvLnZhbHVlID0ga2V5LnRvU3RyaW5nKCk7XG4gICAgICB0aGlzLnJhZGlvQnV0dG9ucy5wdXNoKHJhZGlvKTtcbiAgICAgIGxldCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICBVdGlsLmFkZENsYXNzKGxhYmVsLCAnTEFCRUwnKTtcbiAgICAgIGxhYmVsLmlkID0gbGFiZWxJZDtcbiAgICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgcmFkaW9JZCk7XG4gICAgICBsYWJlbC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocmFkaW8pO1xuICAgICAgY29udGVudC5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICB0aGlzLmNhcmQuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBidXR0b25zIHRvIHRoZSBjYXJkLlxuICAgKi9cbiAgcHJvdGVjdGVkIGJ1dHRvbnMoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICBVdGlsLm1ha2VCdXR0b24oXG4gICAgICAgIHRoaXMucHJldmlvdXNOYW1lLCB0aGlzLmZpcmVQcmV2aW91cy5iaW5kKHRoaXMpLCB0aGlzLmNhcmQuYnV0dG9ucywgJ1BSRVZJT1VTJyk7XG4gICAgfVxuICAgIFV0aWwubWFrZUJ1dHRvbih0aGlzLm5leHROYW1lLCB0aGlzLmZpcmVOZXh0LmJpbmQodGhpcyksIHRoaXMuY2FyZC5idXR0b25zLCAnTkVYVCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjdGlvbiBvbiBuZXh0IGJ1dHRvbi5cbiAgICovXG4gIHByb3RlY3RlZCBmaXJlTmV4dCgpIHtcbiAgICBmb3IgKGxldCByYWRpbyBvZiB0aGlzLnJhZGlvQnV0dG9ucykge1xuICAgICAgaWYgKChyYWRpbyBhcyBhbnkpLmNoZWNrZWQpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gKHJhZGlvIGFzIGFueSkudmFsdWU7XG4gICAgICAgIGxldCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICB0aGlzLnRyZWUuaGlzdG9yeS5wdXNoKG51bSk7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLmdldChudW0pLnNob3coKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY3Rpb24gb24gcHJldmlvdXMgYnV0dG9uLlxuICAgKi9cbiAgcHJvdGVjdGVkIGZpcmVQcmV2aW91cygpIHtcbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgdGhpcy5wYXJlbnQuc2hvdygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBub2RlLlxuICAgKi9cbiAgcHVibGljIHNob3coKSB7XG4gICAgdGhpcy5jYXJkLnNob3coKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBub2RlLlxuICAgKi9cbiAgcHVibGljIGhpZGUoKSB7XG4gICAgdGhpcy5jYXJkLmhpZGUoKTtcbiAgfVxuXG59XG5cblxuLyoqXG4gKiBCaW5hcnkgbm9kZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCaW5hcnkgZXh0ZW5kcyBOb2RlIHtcblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBwdWJsaWMga2luZCA9ICdiaW5hcnknO1xuXG5cbiAgY29uc3RydWN0b3IocHVibGljIGNvbnRlbnQ6IHN0cmluZywgcHVibGljIHRpdGxlOiBzdHJpbmcsIHB1YmxpYyB2YWx1ZSA9IDApIHtcbiAgICBzdXBlcihjb250ZW50LCB0aXRsZSwgdmFsdWUsXG4gICAgICAgICAgW3t0ZXh0OiAnWWVzJywgdmFsdWU6IDF9LCB7dGV4dDogJ05vJywgdmFsdWU6IDB9XSk7XG4gIH1cblxufVxuXG5cbi8qKlxuICogTXVsdGlwbHkgYnJhbmNoaW5nIG5vZGVzLlxuICovXG5leHBvcnQgY2xhc3MgTmFyeSBleHRlbmRzIE5vZGUge1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHB1YmxpYyBraW5kID0gJ25hcnknO1xuXG59XG5cblxuLyoqXG4gKiBMZWFmIG5vZGVzLlxuICovXG5leHBvcnQgY2xhc3MgTGVhZiBleHRlbmRzIE5vZGUge1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHB1YmxpYyBraW5kID0gJ2xlYWYnO1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHB1YmxpYyBuZXh0TmFtZSA9ICdSZXN0YXJ0JztcblxuICAvKipcbiAgICogU3VtbWFyeSBidXR0b24uXG4gICAqL1xuICBwdWJsaWMgc3VtbWFyeUJ1dHRvbjogSFRNTEVsZW1lbnQ7XG5cbiAgLyoqXG4gICAqIEFjdGlvbiBvciBHbyBidXR0b24uXG4gICAqL1xuICBwdWJsaWMgYWN0aW9uQnV0dG9uOiBIVE1MRWxlbWVudDtcblxuICBcbiAgY29uc3RydWN0b3IoY29udGVudDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyLFxuICAgICAgICAgICAgICBwdWJsaWMgYWN0aW9uOiBzdHJpbmcgPSAnJykge1xuICAgIHN1cGVyKGNvbnRlbnQsIHRpdGxlLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBwcm90ZWN0ZWQgYnV0dG9ucygpIHtcbiAgICBzdXBlci5idXR0b25zKCk7XG4gICAgdGhpcy5zdW1tYXJ5QnV0dG9uID0gVXRpbC5tYWtlQnV0dG9uKFxuICAgICAgJ1N1bW1hcnknLCB0aGlzLmZpcmVTdW1tYXJ5LmJpbmQodGhpcyksIHRoaXMuY2FyZC5idXR0b25zKTtcbiAgICBpZiAodGhpcy5hY3Rpb24pIHtcbiAgICAgIHRoaXMuYWN0aW9uQnV0dG9uID0gVXRpbC5tYWtlQnV0dG9uKFxuICAgICAgICAnR28nLCB0aGlzLmZpcmVBY3Rpb24uYmluZCh0aGlzKSwgdGhpcy5jYXJkLmJ1dHRvbnMsICdBQ1RJT04nKTtcbiAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY3Rpb24gb24gZ28gYnV0dG9uLiBGaXJlcyB1cCBhIG5ldyB0YWIuXG4gICAqL1xuICBwcm90ZWN0ZWQgZmlyZUFjdGlvbigpIHtcbiAgICB3aW5kb3cub3Blbih0aGlzLmFjdGlvbiwgJ19ibGFuaycpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjdGlvbiBvbiBzdW1tYXJ5IGJ1dHRvbi5cbiAgICovXG4gIHByb3RlY3RlZCBmaXJlU3VtbWFyeSgpIHtcbiAgICB0aGlzLnRyZWUuc3VtbWFyeSh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHByb3RlY3RlZCBmaXJlTmV4dCgpIHtcbiAgICB0aGlzLmhpZGUoKTtcbiAgICB0aGlzLnRyZWUucm9vdC5zaG93KCk7XG4gICAgdGhpcy50cmVlLmhpc3RvcnkgPSBbXTtcbiAgfVxuXG59XG5cblxuLyoqXG4gKiBTdW1tYXJ5IG5vZGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdW1tYXJ5IGV4dGVuZHMgTm9kZSB7XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcHVibGljIGtpbmQgPSAnc3VtbWFyeSc7XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcHVibGljIG5leHROYW1lID0gJ1Jlc3RhcnQnO1xuXG4gIHB1YmxpYyBzdW1tYXJ5RWxlbWVudCA9IFV0aWwubWFrZU5vZGUoJ2RpdicsICdTVU1NQVJZJyk7XG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignJywgJ1N1bW1hcnknKTtcbiAgICB0aGlzLmNhcmQuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnN1bW1hcnlFbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHByb3RlY3RlZCBmaXJlTmV4dCgpIHtcbiAgICB0aGlzLmhpZGUoKTtcbiAgICB0aGlzLnRyZWUucm9vdC5zaG93KCk7XG4gICAgdGhpcy50cmVlLmhpc3RvcnkgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHB1YmxpYyBzaG93KCkge1xuICAgIHN1cGVyLnNob3coKTtcbiAgICB0aGlzLmNvbXBpbGVTdW1tYXJ5KCk7XG4gIH1cblxuICBwcml2YXRlIGNvbXBpbGVTdW1tYXJ5KCkge1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgbGV0IGhsID0gdGhpcy50cmVlLmhpc3RvcnkubGVuZ3RoO1xuICAgIGxldCBub2RlID0gdGhpcy5wYXJlbnQ7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgZG8ge1xuICAgICAgbGV0IGFuc3dlciA9IGNvdW50ID8gbm9kZS5sYWJlbHMuZ2V0KHRoaXMudHJlZS5oaXN0b3J5W2hsIC0gY291bnRdKSA6ICcnO1xuICAgICAgcmVzdWx0LnVuc2hpZnQodGhpcy5tYWtlU3VtbWFyeUxpbmUobm9kZS5jb250ZW50LCBhbnN3ZXIpKTtcbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudDtcbiAgICAgIGNvdW50Kys7XG4gICAgfSB3aGlsZSAobm9kZSk7XG4gICAgcmVzdWx0LmZvckVhY2goeCA9PiB0aGlzLnN1bW1hcnlFbGVtZW50LmFwcGVuZENoaWxkKHgpKTtcbiAgfVxuXG4gIHByaXZhdGUgbWFrZVN1bW1hcnlMaW5lKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgIGxldCBkaXYgPSBVdGlsLm1ha2VOb2RlKCdkaXYnLCAnU1VNTUFSWUxJTkUnKTtcbiAgICBVdGlsLm1ha2VTcGFuKGRpdiwgcXVlc3Rpb24sICdRVUVTVElPTicpO1xuICAgIFV0aWwubWFrZVNwYW4oZGl2LCBhbnN3ZXIsICdBTlNXRVInKTtcbiAgICByZXR1cm4gZGl2O1xuICB9XG5cbn1cblxuXG4vKipcbiAqIENsYXNzIHRoYXQgaG9sZHMgdGhlIEhUTUwgZWxlbWVudHMgb2YgdGhlIGFjdHVhbGx5IGRpc3BsYXllZCBjYXJkLlxuICovXG5leHBvcnQgY2xhc3MgQ2FyZCB7XG5cbiAgcHVibGljIGRpdjogSFRNTEVsZW1lbnQgPSBVdGlsLm1ha2VOb2RlKCdkaXYnLCAnTk9ERScpO1xuICBwdWJsaWMgdGl0bGU6IEhUTUxFbGVtZW50ID0gVXRpbC5tYWtlTm9kZSgnaDEnLCAnVElUTEUnKTtcbiAgcHVibGljIGNvbnRlbnQ6IEhUTUxFbGVtZW50ID0gVXRpbC5tYWtlTm9kZSgnZGl2JywgJ0NPTlRFTlQnKVxuICBwdWJsaWMgYnV0dG9uczogSFRNTEVsZW1lbnQgPSBVdGlsLm1ha2VOb2RlKCdkaXYnLCAnQlVUVE9OUycpO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMudGl0bGUpO1xuICAgIHRoaXMudGl0bGUuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgIHRoaXMuZGl2LmFwcGVuZENoaWxkKHRoaXMuY29udGVudCk7XG4gICAgdGhpcy5jb250ZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICB0aGlzLmRpdi5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGNhcmQuXG4gICAqL1xuICBwdWJsaWMgc2hvdygpIHtcbiAgICB0aGlzLmRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLnRpdGxlLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xuICAgIHRoaXMuY29udGVudC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICB0aGlzLnRpdGxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgIHRoaXMudGl0bGUuZm9jdXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBjYXJkLlxuICAgKi9cbiAgcHVibGljIGhpZGUoKSB7XG4gICAgdGhpcy5kaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLnRpdGxlLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1saXZlJyk7XG4gICAgdGhpcy50aXRsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgdGhpcy5jb250ZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgfVxuXG59XG4iLCIvLyAgICAgICAgICAgICAgICAgICAgR05VIEdFTkVSQUwgUFVCTElDIExJQ0VOU0Vcbi8vICAgICAgICAgICAgICAgICAgICAgICBWZXJzaW9uIDMsIDI5IEp1bmUgMjAwN1xuLy9cbi8vICAoYykgMjAyMCBWb2xrZXIgU29yZ2UsIHYuc29yZ2VAcHJvZ3Jlc3NpdmVhY2Nlc3MuY29tXG4vLyAgICAgICAgICAgQmVuZXRlY2ggJiBFVFMgaGFja2F0aG9uXG4vL1xuXG5uYW1lc3BhY2UgVXRpbCB7XG5cbiAgLyoqXG4gICAqIENsYXNzbmFtZSBwcmVmaXguXG4gICAqL1xuICBsZXQgcHJlZml4ID0gJ0RUXyc7XG5cbiAgLyoqXG4gICAqIEFkZHMgY2xhc3Mgd2l0aCB0aGUgcmlnaHQgcHJlZml4IHRvIGFuIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IC4uLnJlc3QgQSByZXN0IGxpc3Qgb2YgY2xhc3Nlcy5cbiAgICovXG4gIGV4cG9ydCBjb25zdCBhZGRDbGFzcyA9IGZ1bmN0aW9uKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCAuLi5yZXN0OiBzdHJpbmdbXSkge1xuICAgIHJlc3QuZm9yRWFjaCh4ID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChwcmVmaXggKyB4LnRvVXBwZXJDYXNlKCkpKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGJ1dHRvbiBlbGVtZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYnV0dG9uLlxuICAgKiBAcGFyYW0geygpID0+IGFueX0gYWN0aW9uIFRoZSBhY3Rpb24gaXQgc2hvdWxkIHBlcmZvcm0uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudCBUaGUgcGFyZW50IHRvIGF0dGFjaGUgdGhlIGJ1dHRvbiB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBjbGFzc25hbWUgVGhlIGNsYXNzbmFtZSBvZiB0aGUgZWxlbWVudC5cbiAgICogQHJldHVybiB7SFRNTEJ1dHRvbkVsZW1lbnR9IFRoZSBuZXdseSBjcmVhdGVkIGJ1dHRvbiBlbGVtZW50LlxuICAgKi9cbiAgZXhwb3J0IGNvbnN0IG1ha2VCdXR0b24gPSBmdW5jdGlvbihcbiAgICBuYW1lOiBzdHJpbmcsIGFjdGlvbjogKCkgPT4gYW55LCBwYXJlbnQ6IEhUTUxFbGVtZW50LFxuICAgIGNsYXNzbmFtZTogc3RyaW5nID0gJycpOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBuYW1lO1xuICAgIGFkZENsYXNzKGJ1dHRvbiwgY2xhc3NuYW1lIHx8IG5hbWUudG9VcHBlckNhc2UoKSwgJ0JVVFRPTicpO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFjdGlvbik7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgcmV0dXJuIGJ1dHRvbjtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZXMgYSBnZW5lcmFsIERPTSBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSB0YWcgb2YgdGhlIG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IC4uLmNsYXNzbmFtZSBBIHJlc3QgbGlzdCBvZiBjbGFzc2VzLlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIG5ld2x5IGNyZWF0ZWQgZWxlbWVudC5cbiAgICovXG4gIGV4cG9ydCBjb25zdCBtYWtlTm9kZSA9IGZ1bmN0aW9uKFxuICAgIHRhZzogc3RyaW5nLCAuLi5jbGFzc25hbWU6IHN0cmluZ1tdKTogSFRNTEVsZW1lbnQge1xuICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGFkZENsYXNzKG5vZGUsIC4uLmNsYXNzbmFtZSk7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5kIGF0dGFjaGVzIGEgc3BhbiBlbGVtZW50IHdpdGggdGV4dCBjb250ZW50LlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwYXJlbnQgVGhlIHBhcmVudCBub2RlIHRvIGF0dGFjaCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgVGhlIHRleHQgY29udGVudC5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gLi4uY2xhc3NuYW1lIFRoZSByZXN0IGxpc3Qgb2YgY2xhc3Nlcy5cbiAgICovXG4gIGV4cG9ydCBjb25zdCBtYWtlU3BhbiA9IGZ1bmN0aW9uKFxuICAgIHBhcmVudDogSFRNTEVsZW1lbnQsIGNvbnRlbnQ6IHN0cmluZywgLi4uY2xhc3NuYW1lOiBzdHJpbmdbXSkge1xuICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGFkZENsYXNzKHNwYW4sIC4uLmNsYXNzbmFtZSk7XG4gICAgc3Bhbi5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgfTtcblxufVxuXG5leHBvcnQgZGVmYXVsdCBVdGlsO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==